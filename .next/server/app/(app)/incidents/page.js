(()=>{var e={};e.id=956,e.ids=[956],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6385:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(3190),s(8927),s(5866),s(2029);var r=s(3191),a=s(8716),i=s(7922),l=s.n(i),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["(app)",{children:["incidents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3190)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\incidents\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\incidents\\page.tsx"],u="/(app)/incidents/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/incidents/page",pathname:"/incidents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6017:(e,t,s)=>{let r={"15ddf9ee9e002025c540d0c2f6e0bed38d32abc4":()=>Promise.resolve().then(s.bind(s,7074)).then(e=>e.logIncident),"95467358ab31f082e55905055ec53a2e3d688099":()=>Promise.resolve().then(s.bind(s,7074)).then(e=>e.resolveIncident)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={"15ddf9ee9e002025c540d0c2f6e0bed38d32abc4":a.bind(null,"15ddf9ee9e002025c540d0c2f6e0bed38d32abc4"),"95467358ab31f082e55905055ec53a2e3d688099":a.bind(null,"95467358ab31f082e55905055ec53a2e3d688099")}},7881:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5285:(e,t,s)=>{Promise.resolve().then(s.bind(s,1788))},4571:()=>{},3458:(e,t,s)=>{Promise.resolve().then(s.bind(s,7676))},1788:(e,t,s)=>{"use strict";s.d(t,{default:()=>g});var r=s(326),a=s(7577),i=s(434),l=s(9656);let n="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function o({label:e,children:t}){return(0,r.jsxs)("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400",children:e}),t]})}let c={tool_id:"",type:"outage",severity:"medium",description:"",root_cause:"",financial_impact:null,resolution_steps:"",preventive_measures:"",status:"open",occurred_at:new Date().toISOString().slice(0,16)};function d({tools:e,onClose:t}){let[s,i]=(0,a.useState)(c),[d,u]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),h=(e,t)=>i(s=>({...s,[e]:t})),g=async e=>{if(e.preventDefault(),!s.tool_id)return;u(!0),p(null);let r=await (0,l.G)(s);u(!1),r.error?p(r.error):t()};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Log Incident"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:g,className:"px-6 py-5 space-y-4",children:[x&&r.jsx("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:x}),r.jsx(o,{label:"Tool *",children:(0,r.jsxs)("select",{value:s.tool_id,onChange:e=>h("tool_id",e.target.value),required:!0,className:n,children:[r.jsx("option",{value:"",children:"Select a tool..."}),e.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx(o,{label:"Type",children:(0,r.jsxs)("select",{value:s.type,onChange:e=>h("type",e.target.value),className:n,children:[r.jsx("option",{value:"outage",children:"Outage"}),r.jsx("option",{value:"cost_spike",children:"Cost Spike"}),r.jsx("option",{value:"security",children:"Security"})]})}),r.jsx(o,{label:"Severity",children:(0,r.jsxs)("select",{value:s.severity,onChange:e=>h("severity",e.target.value),className:n,children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"critical",children:"Critical"})]})}),r.jsx(o,{label:"Status",children:(0,r.jsxs)("select",{value:s.status,onChange:e=>h("status",e.target.value),className:n,children:[r.jsx("option",{value:"open",children:"Open"}),r.jsx("option",{value:"investigating",children:"Investigating"}),r.jsx("option",{value:"resolved",children:"Resolved"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(o,{label:"Occurred At",children:r.jsx("input",{type:"datetime-local",value:s.occurred_at,onChange:e=>h("occurred_at",e.target.value),className:n})}),r.jsx(o,{label:"Financial Impact (USD)",children:r.jsx("input",{type:"number",step:"0.01",min:"0",value:s.financial_impact??"",onChange:e=>h("financial_impact",e.target.value?parseFloat(e.target.value):null),placeholder:"0.00",className:n})})]}),r.jsx(o,{label:"Description",children:r.jsx("textarea",{value:s.description,onChange:e=>h("description",e.target.value),rows:2,placeholder:"What happened?",className:`${n} resize-none`})}),r.jsx(o,{label:"Root Cause",children:r.jsx("textarea",{value:s.root_cause,onChange:e=>h("root_cause",e.target.value),rows:2,placeholder:"Why did it happen?",className:`${n} resize-none`})}),r.jsx(o,{label:"Resolution Steps",children:r.jsx("textarea",{value:s.resolution_steps,onChange:e=>h("resolution_steps",e.target.value),rows:2,placeholder:"How was it resolved?",className:`${n} resize-none`})}),r.jsx(o,{label:"Preventive Measures",children:r.jsx("textarea",{value:s.preventive_measures,onChange:e=>h("preventive_measures",e.target.value),rows:2,placeholder:"How to prevent recurrence?",className:`${n} resize-none`})}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:d?"Saving...":"Log Incident"})]})]})]})})}let u={low:"bg-green-900 text-green-300",medium:"bg-yellow-900 text-yellow-300",high:"bg-orange-900 text-orange-300",critical:"bg-red-900 text-red-300"},x={open:"bg-red-900 text-red-300",investigating:"bg-yellow-900 text-yellow-300",resolved:"bg-green-900 text-green-300"},p={outage:"bg-red-900 text-red-300",cost_spike:"bg-orange-900 text-orange-300",security:"bg-purple-900 text-purple-300"};function h({label:e,cls:t}){return r.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs font-medium capitalize ${t}`,children:e.replace("_"," ")})}function g({incidents:e,tools:t}){let[s,l]=(0,a.useState)(!1),[n,o]=(0,a.useState)(""),[c,g]=(0,a.useState)(""),[m,v]=(0,a.useState)(""),b=e.filter(e=>(!n||e.type===n)&&(!c||e.severity===c)&&(!m||e.status===m)),y=e.filter(e=>"open"===e.status).length,j=e.filter(e=>"investigating"===e.status).length,f=e.filter(e=>"critical"===e.severity&&"resolved"!==e.status).length;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Incidents"}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[e.length," total incidents"]})]}),r.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium rounded-lg transition-colors",children:"+ Log Incident"})]}),f>0&&(0,r.jsxs)("div",{className:"bg-red-900/30 border border-red-800 rounded-xl px-5 py-4 flex items-center gap-3",children:[r.jsx("span",{className:"text-red-400 text-lg",children:"⚠"}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-red-300",children:[f," critical incident",f>1?"s":""," unresolved"]})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Open",value:y,cls:y>0?"text-red-400":"text-white"},{label:"Investigating",value:j,cls:j>0?"text-yellow-400":"text-white"},{label:"Critical",value:f,cls:f>0?"text-red-400":"text-white"},{label:"Total",value:e.length,cls:"text-white"}].map(e=>(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e.label}),r.jsx("p",{className:`mt-1.5 text-xl font-bold ${e.cls}`,children:e.value})]},e.label))}),(0,r.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,r.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"outage",children:"Outage"}),r.jsx("option",{value:"cost_spike",children:"Cost Spike"}),r.jsx("option",{value:"security",children:"Security"})]}),(0,r.jsxs)("select",{value:c,onChange:e=>g(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"All Severities"}),r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"critical",children:"Critical"})]}),(0,r.jsxs)("select",{value:m,onChange:e=>v(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"open",children:"Open"}),r.jsx("option",{value:"investigating",children:"Investigating"}),r.jsx("option",{value:"resolved",children:"Resolved"})]}),(n||c||m)&&r.jsx("button",{onClick:()=>{o(""),g(""),v("")},className:"text-sm text-gray-400 hover:text-white px-3 py-2 transition-colors",children:"Clear"})]}),r.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-800",children:["Tool","Type","Description","Severity","Status","Date",""].map(e=>r.jsx("th",{className:"text-left px-5 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:0===b.length?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-5 py-10 text-center text-gray-500",children:"No incidents found"})}):b.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[r.jsx("td",{className:"px-5 py-4",children:e.tools?r.jsx(i.default,{href:`/tools/${e.tools.id}`,className:"font-medium text-indigo-400 hover:text-indigo-300",children:e.tools.name}):"—"}),r.jsx("td",{className:"px-5 py-4",children:r.jsx(h,{label:e.type,cls:p[e.type]})}),r.jsx("td",{className:"px-5 py-4 text-gray-400 max-w-xs truncate",children:e.description??"—"}),r.jsx("td",{className:"px-5 py-4",children:r.jsx(h,{label:e.severity,cls:u[e.severity]})}),r.jsx("td",{className:"px-5 py-4",children:r.jsx(h,{label:e.status,cls:x[e.status]})}),r.jsx("td",{className:"px-5 py-4 text-gray-500 text-xs whitespace-nowrap",children:new Date(e.occurred_at).toLocaleDateString()}),r.jsx("td",{className:"px-5 py-4 text-right",children:r.jsx(i.default,{href:`/incidents/${e.id}`,className:"text-indigo-400 hover:text-indigo-300 text-xs font-medium transition-colors",children:"View →"})})]},e.id))})]})}),s&&r.jsx(d,{tools:t,onClose:()=>l(!1)})]})}},9656:(e,t,s)=>{"use strict";s.d(t,{G:()=>i,o:()=>a}),s(5424);var r=s(6242),a=(0,r.$)("95467358ab31f082e55905055ec53a2e3d688099"),i=(0,r.$)("15ddf9ee9e002025c540d0c2f6e0bed38d32abc4")},7676:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(326),a=s(434),i=s(5047),l=s(9701);let n=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function o(){let e=(0,i.usePathname)(),t=(0,i.useRouter)(),s=(0,l.e)(),o=async()=>{await s.auth.signOut(),t.push("/login")};return(0,r.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,r.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),r.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:n.map(({href:t,label:s,icon:i})=>{let l=e===t||e.startsWith(`${t}/`);return(0,r.jsxs)(a.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${l?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[r.jsx("span",{className:"text-base leading-none",children:i}),s]},t)})}),r.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,r.jsxs)("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[r.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,s)=>{"use strict";s.d(t,{e:()=>a});var r=s(861);let a=()=>(0,r.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},7074:(e,t,s)=>{"use strict";s.r(t),s.d(t,{logIncident:()=>l,resolveIncident:()=>n});var r=s(7745);s(6461);var a=s(1870),i=s(207);async function l(e){let t=await (0,a.e)(),{error:s}=await t.from("incident_logs").insert({tool_id:e.tool_id,type:e.type,severity:e.severity,description:e.description||null,root_cause:e.root_cause||null,financial_impact:e.financial_impact,resolution_steps:e.resolution_steps||null,preventive_measures:e.preventive_measures||null,status:e.status,occurred_at:e.occurred_at||new Date().toISOString()});return s?{error:s.message}:((0,i.revalidatePath)("/incidents"),{error:null})}async function n(e,t){let s=await (0,a.e)(),{error:r}=await s.from("incident_logs").update({status:"resolved",resolved_by:t||null,resolved_at:new Date().toISOString()}).eq("id",e);return r?{error:r.message}:((0,i.revalidatePath)("/incidents"),(0,i.revalidatePath)(`/incidents/${e}`),{error:null})}(0,s(5723).h)([l,n]),(0,r.j)("15ddf9ee9e002025c540d0c2f6e0bed38d32abc4",l),(0,r.j)("95467358ab31f082e55905055ec53a2e3d688099",n)},3190:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(9510),a=s(5655);let i=(0,s(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\app\(app)\incidents\IncidentsClient.tsx#default`);async function l(){let e=await (0,a.e)(),[{data:t},{data:s}]=await Promise.all([e.from("incident_logs").select("*, tools(id, name, category)").order("occurred_at",{ascending:!1}),e.from("tools").select("id, name").eq("status","active").order("name")]);return r.jsx(i,{incidents:t??[],tools:s??[]})}},8927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(9510),a=s(8585),i=s(5655);let l=(0,s(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function n({children:e}){let t=await (0,i.e)(),{data:{user:s}}=await t.auth.getUser();return s||(0,a.redirect)("/login"),(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[r.jsx(l,{}),r.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>a});var r=s(9510);s(5023);let a={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},1870:(e,t,s)=>{"use strict";s.d(t,{e:()=>i});var r=s(6389),a=s(3973);let i=async()=>{let e=await (0,a.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}},5655:(e,t,s)=>{"use strict";s.d(t,{e:()=>i});var r=s(2728),a=s(1615);let i=async()=>{let e=await (0,a.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,471,637,861,512,799],()=>s(6385));module.exports=r})();