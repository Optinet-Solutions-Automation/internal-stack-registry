(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{9877:function(e,t,r){Promise.resolve().then(r.bind(r,3483))},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return l.a}});var s=r(2972),l=r.n(s)},2119:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return l}});let s=r(3079);function l(e){let{createServerReference:t}=r(6671);return t(e,s.callServer)}},3483:function(e,t,r){"use strict";r.d(t,{default:function(){return u}});var s=r(7437),l=r(2265),a=r(7648),n=r(7999);let i={low:"bg-green-900 text-green-300",medium:"bg-yellow-900 text-yellow-300",high:"bg-orange-900 text-orange-300",critical:"bg-red-900 text-red-300"},c={open:"bg-red-900 text-red-300",investigating:"bg-yellow-900 text-yellow-300",resolved:"bg-green-900 text-green-300"},o={outage:"bg-red-900 text-red-300",cost_spike:"bg-orange-900 text-orange-300",security:"bg-purple-900 text-purple-300"};function d(e){let{label:t,cls:r}=e;return(0,s.jsx)("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium capitalize ".concat(r),children:t.replace("_"," ")})}function x(e){let{title:t,children:r}=e;return(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 space-y-3",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:t}),r]})}function u(e){var t,r,u,g,m;let{incident:p}=e,[b,h]=(0,l.useState)(""),[v,y]=(0,l.useState)(!1),[f,j]=(0,l.useState)(!1),[N,w]=(0,l.useState)(null),_=async e=>{e.preventDefault(),y(!0),w(null);let t=await (0,n.o)(p.id,b);y(!1),t.error?w(t.error):j(!1)};return(0,s.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(a.default,{href:"/incidents",className:"text-sm text-gray-500 hover:text-gray-300 transition-colors",children:"← Back to Incidents"}),(0,s.jsxs)("div",{className:"mt-3 flex items-center gap-3 flex-wrap",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white capitalize",children:p.type.replace("_"," ")}),(0,s.jsx)(d,{label:p.severity,cls:i[p.severity]}),(0,s.jsx)(d,{label:p.status,cls:c[p.status]}),(0,s.jsx)(d,{label:p.type,cls:o[p.type]})]}),p.tools&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-400",children:["Tool: ",(0,s.jsx)(a.default,{href:"/tools/".concat(p.tools.id),className:"text-indigo-400 hover:text-indigo-300",children:p.tools.name})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Occurred",value:new Date(p.occurred_at).toLocaleDateString()},{label:"Financial Impact",value:null!=p.financial_impact?"USD ".concat(Number(p.financial_impact).toFixed(2)):"—"},{label:"Resolved By",value:null!==(t=p.resolved_by)&&void 0!==t?t:"—"},{label:"Resolved At",value:p.resolved_at?new Date(p.resolved_at).toLocaleDateString():"—"}].map(e=>(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e.label}),(0,s.jsx)("p",{className:"mt-1.5 text-sm font-semibold text-white",children:e.value})]},e.label))}),(0,s.jsx)(x,{title:"Description",children:(0,s.jsx)("p",{className:"text-sm text-gray-300",children:null!==(r=p.description)&&void 0!==r?r:"No description provided."})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(x,{title:"Root Cause",children:(0,s.jsx)("p",{className:"text-sm text-gray-300",children:null!==(u=p.root_cause)&&void 0!==u?u:"—"})}),(0,s.jsx)(x,{title:"Resolution Steps",children:(0,s.jsx)("p",{className:"text-sm text-gray-300",children:null!==(g=p.resolution_steps)&&void 0!==g?g:"—"})})]}),(0,s.jsx)(x,{title:"Preventive Measures",children:(0,s.jsx)("p",{className:"text-sm text-gray-300",children:null!==(m=p.preventive_measures)&&void 0!==m?m:"—"})}),"resolved"!==p.status&&(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Resolve Incident"}),f?(0,s.jsxs)("form",{onSubmit:_,className:"space-y-3 max-w-sm",children:[N&&(0,s.jsx)("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-xs rounded-lg px-3 py-2",children:N}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs text-gray-400",children:"Resolved By"}),(0,s.jsx)("input",{type:"text",value:b,onChange:e=>h(e.target.value),placeholder:"Your name",className:"w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-green-700 hover:bg-green-600 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:v?"Saving...":"Confirm"})]})]}):(0,s.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-green-700 hover:bg-green-600 text-white text-sm font-medium rounded-lg transition-colors",children:"Mark as Resolved"})]})]})}},7999:function(e,t,r){"use strict";r.d(t,{G:function(){return a},o:function(){return l}}),r(3079);var s=r(2119),l=(0,s.$)("95467358ab31f082e55905055ec53a2e3d688099"),a=(0,s.$)("15ddf9ee9e002025c540d0c2f6e0bed38d32abc4")}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=9877)}),_N_E=e.O()}]);