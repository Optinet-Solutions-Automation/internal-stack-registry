(()=>{var e={};e.id=681,e.ids=[681],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8102:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(2323),r(8927),r(5866),r(2029);var s=r(3191),a=r(8716),l=r(7922),n=r.n(l),i=r(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["(app)",{children:["credentials",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2323)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\credentials\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\credentials\\page.tsx"],x="/(app)/credentials/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/credentials/page",pathname:"/credentials",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8854:(e,t,r)=>{let s={"6531035d583b8397b205eebde12e022853ea8ad6":()=>Promise.resolve().then(r.bind(r,462)).then(e=>e.createCredential)};async function a(e,...t){return(await s[e]()).apply(null,t)}e.exports={"6531035d583b8397b205eebde12e022853ea8ad6":a.bind(null,"6531035d583b8397b205eebde12e022853ea8ad6")}},7881:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},1918:(e,t,r)=>{Promise.resolve().then(r.bind(r,5067))},4571:()=>{},3458:(e,t,r)=>{Promise.resolve().then(r.bind(r,7676))},5067:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(326),a=r(7577),l=r(434);r(5424);var n=(0,r(6242).$)("6531035d583b8397b205eebde12e022853ea8ad6");let i="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function o({label:e,children:t}){return(0,s.jsxs)("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400",children:e}),t]})}let d=["SSO","API Key","Username / Password","OAuth","Service Account","MFA Token"],c={tool_id:"",login_type:"",credential_location:"",last_rotated:"",rotation_policy:"",owner:"",compliance_notes:""};function x({tools:e,onClose:t}){let[r,l]=(0,a.useState)(c),[x,p]=(0,a.useState)(!1),[h,u]=(0,a.useState)(null),m=(e,t)=>l(r=>({...r,[e]:t})),g=async e=>{if(e.preventDefault(),!r.tool_id)return;p(!0),u(null);let s=await n(r);p(!1),s.error?u(s.error):t()};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Add Credential Reference"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),s.jsx("div",{className:"px-5 py-3 bg-gray-800/50 border-b border-gray-800",children:s.jsx("p",{className:"text-xs text-gray-400",children:"⚠ Never enter raw passwords. Store only references to where credentials are kept (e.g. vault paths, 1Password entries)."})}),(0,s.jsxs)("form",{onSubmit:g,className:"px-6 py-5 space-y-4",children:[h&&s.jsx("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:h}),s.jsx(o,{label:"Tool *",children:(0,s.jsxs)("select",{value:r.tool_id,onChange:e=>m("tool_id",e.target.value),required:!0,className:i,children:[s.jsx("option",{value:"",children:"Select a tool..."}),e.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(o,{label:"Login Type",children:(0,s.jsxs)("select",{value:r.login_type,onChange:e=>m("login_type",e.target.value),className:i,children:[s.jsx("option",{value:"",children:"Select..."}),d.map(e=>s.jsx("option",{value:e,children:e},e))]})}),s.jsx(o,{label:"Owner",children:s.jsx("input",{type:"text",value:r.owner,onChange:e=>m("owner",e.target.value),placeholder:"e.g. DevOps",className:i})})]}),s.jsx(o,{label:"Credential Location",children:s.jsx("input",{type:"text",value:r.credential_location,onChange:e=>m("credential_location",e.target.value),placeholder:"e.g. 1Password > Vercel API Keys",className:i})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(o,{label:"Last Rotated",children:s.jsx("input",{type:"date",value:r.last_rotated,onChange:e=>m("last_rotated",e.target.value),className:i})}),s.jsx(o,{label:"Rotation Policy",children:s.jsx("input",{type:"text",value:r.rotation_policy,onChange:e=>m("rotation_policy",e.target.value),placeholder:"e.g. Every 90 days",className:i})})]}),s.jsx(o,{label:"Compliance Notes",children:s.jsx("textarea",{value:r.compliance_notes,onChange:e=>m("compliance_notes",e.target.value),rows:2,placeholder:"Optional compliance or access notes",className:`${i} resize-none`})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:x?"Saving...":"Add Reference"})]})]})]})})}function p(e){return e?Math.floor((new Date().getTime()-new Date(e).getTime())/864e5):null}function h({lastRotated:e,policy:t}){let r=p(e);if(!e)return s.jsx("span",{className:"text-gray-500",children:"Never rotated"});let a=new Date(e).toLocaleDateString(),l=t?.match(/(\d+)/),n=l?parseInt(l[1]):null;return n&&null!==r&&r>n?(0,s.jsxs)("div",{children:[s.jsx("span",{className:"text-red-400 font-medium",children:a}),(0,s.jsxs)("span",{className:"ml-2 text-xs text-red-400",children:["(",r,"d ago — overdue)"]})]}):n&&null!==r&&r>.8*n?(0,s.jsxs)("div",{children:[s.jsx("span",{className:"text-yellow-400 font-medium",children:a}),(0,s.jsxs)("span",{className:"ml-2 text-xs text-yellow-400",children:["(",r,"d ago)"]})]}):(0,s.jsxs)("span",{className:"text-gray-300",children:[a," ",(0,s.jsxs)("span",{className:"text-gray-500 text-xs",children:["(",r,"d ago)"]})]})}function u({credentials:e,tools:t}){let[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(""),d=[...new Set(e.map(e=>e.login_type).filter(Boolean))],c=e.filter(e=>!i||e.login_type===i),u=e.filter(e=>{let t=p(e.last_rotated),r=e.rotation_policy?.match(/(\d+)/),s=r?parseInt(r[1]):null;return null!==t&&null!==s&&t>s}).length;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Credentials"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[e.length," credential references — no raw passwords stored"]})]}),s.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium rounded-lg transition-colors",children:"+ Add Reference"})]}),u>0&&(0,s.jsxs)("div",{className:"bg-red-900/30 border border-red-800 rounded-xl px-5 py-4 flex items-center gap-3",children:[s.jsx("span",{className:"text-red-400 text-lg",children:"⚠"}),(0,s.jsxs)("p",{className:"text-sm font-semibold text-red-300",children:[u," credential",u>1?"s":""," overdue for rotation"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total References"}),s.jsx("p",{className:"mt-1.5 text-xl font-bold text-white",children:e.length})]}),(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Overdue Rotation"}),s.jsx("p",{className:`mt-1.5 text-xl font-bold ${u>0?"text-red-400":"text-white"}`,children:u})]}),(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Never Rotated"}),s.jsx("p",{className:"mt-1.5 text-xl font-bold text-white",children:e.filter(e=>!e.last_rotated).length})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"",children:"All Login Types"}),d.map(e=>s.jsx("option",{value:e,children:e},e))]}),i&&s.jsx("button",{onClick:()=>o(""),className:"text-sm text-gray-400 hover:text-white px-3 py-2 transition-colors",children:"Clear"})]}),s.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-gray-800",children:["Tool","Login Type","Credential Location","Owner","Rotation Policy","Last Rotated"].map(e=>s.jsx("th",{className:"text-left px-5 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:0===c.length?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-5 py-10 text-center text-gray-500",children:"No credentials found"})}):c.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[s.jsx("td",{className:"px-5 py-4",children:e.tools?s.jsx(l.default,{href:`/tools/${e.tools.id}`,className:"font-medium text-indigo-400 hover:text-indigo-300",children:e.tools.name}):"—"}),s.jsx("td",{className:"px-5 py-4",children:e.login_type?s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-gray-800 text-gray-300",children:e.login_type}):"—"}),s.jsx("td",{className:"px-5 py-4 text-gray-300 font-mono text-xs",children:e.credential_location??"—"}),s.jsx("td",{className:"px-5 py-4 text-gray-400",children:e.owner??"—"}),s.jsx("td",{className:"px-5 py-4 text-gray-400 text-xs",children:e.rotation_policy??"—"}),s.jsx("td",{className:"px-5 py-4",children:s.jsx(h,{lastRotated:e.last_rotated,policy:e.rotation_policy})})]},e.id))})]})}),r&&s.jsx(x,{tools:t,onClose:()=>n(!1)})]})}},7676:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(326),a=r(434),l=r(5047),n=r(9701);let i=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function o(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),r=(0,n.e)(),o=async()=>{await r.auth.signOut(),t.push("/login")};return(0,s.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,s.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),s.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),s.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:i.map(({href:t,label:r,icon:l})=>{let n=e===t||e.startsWith(`${t}/`);return(0,s.jsxs)(a.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${n?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[s.jsx("span",{className:"text-base leading-none",children:l}),r]},t)})}),s.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,s.jsxs)("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[s.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var s=r(861);let a=()=>(0,s.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},462:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createCredential:()=>n});var s=r(7745);r(6461);var a=r(1870),l=r(207);async function n(e){let t=await (0,a.e)(),{error:r}=await t.from("credential_reference").insert({tool_id:e.tool_id,login_type:e.login_type||null,credential_location:e.credential_location||null,last_rotated:e.last_rotated||null,rotation_policy:e.rotation_policy||null,owner:e.owner||null,compliance_notes:e.compliance_notes||null});return r?{error:r.message}:((0,l.revalidatePath)("/credentials"),{error:null})}(0,r(5723).h)([n]),(0,s.j)("6531035d583b8397b205eebde12e022853ea8ad6",n)},2323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9510),a=r(5655);let l=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\app\(app)\credentials\CredentialsClient.tsx#default`);async function n(){let e=await (0,a.e)(),[{data:t},{data:r}]=await Promise.all([e.from("credential_reference").select("*, tools(id, name, category)").order("last_rotated",{ascending:!0,nullsFirst:!0}),e.from("tools").select("id, name").eq("status","active").order("name")]);return s.jsx(l,{credentials:t??[],tools:r??[]})}},8927:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(9510),a=r(8585),l=r(5655);let n=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function i({children:e}){let t=await (0,l.e)(),{data:{user:r}}=await t.auth.getUser();return r||(0,a.redirect)("/login"),(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[s.jsx(n,{}),s.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>a});var s=r(9510);r(5023);let a={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function l({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},1870:(e,t,r)=>{"use strict";r.d(t,{e:()=>l});var s=r(6389),a=r(3973);let l=async()=>{let e=await (0,a.cookies)();return(0,s.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})}},5655:(e,t,r)=>{"use strict";r.d(t,{e:()=>l});var s=r(2728),a=r(1615);let l=async()=>{let e=await (0,a.cookies)();return(0,s.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,471,637,861,512,799],()=>r(8102));module.exports=s})();