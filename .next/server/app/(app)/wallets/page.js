(()=>{var e={};e.id=206,e.ids=[206],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},946:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d}),r(3882),r(8927),r(5866),r(2029);var s=r(3191),a=r(8716),l=r(7922),n=r.n(l),i=r(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let d=["",{children:["(app)",{children:["wallets",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3882)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\wallets\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\wallets\\page.tsx"],x="/(app)/wallets/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/wallets/page",pathname:"/wallets",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4665:(e,t,r)=>{let s={"3145bcfb98454fff9691cab0516a7d656ed286f5":()=>Promise.resolve().then(r.bind(r,9989)).then(e=>e.addTopUp),bf101c4a2d0151cc365c52516efaa39600cd3f89:()=>Promise.resolve().then(r.bind(r,9989)).then(e=>e.setBalance),d9f093e597055cc2606b0c0469b5f518fcf0b9a0:()=>Promise.resolve().then(r.bind(r,9989)).then(e=>e.updateThreshold)};async function a(e,...t){return(await s[e]()).apply(null,t)}e.exports={"3145bcfb98454fff9691cab0516a7d656ed286f5":a.bind(null,"3145bcfb98454fff9691cab0516a7d656ed286f5"),bf101c4a2d0151cc365c52516efaa39600cd3f89:a.bind(null,"bf101c4a2d0151cc365c52516efaa39600cd3f89"),d9f093e597055cc2606b0c0469b5f518fcf0b9a0:a.bind(null,"d9f093e597055cc2606b0c0469b5f518fcf0b9a0")}},7881:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3359:(e,t,r)=>{Promise.resolve().then(r.bind(r,8970))},4571:()=>{},3458:(e,t,r)=>{Promise.resolve().then(r.bind(r,7676))},8970:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(326),a=r(7577),l=r(434),n=r(7699);function i({wallets:e}){let[t,r]=(0,a.useState)(null),[i,c]=(0,a.useState)(""),[d,o]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null),h=e=>{r(e.id),c(Number(e.current_balance).toFixed(2)),u(null)},p=()=>{r(null),u(null)},m=async e=>{let t=parseFloat(i);if(isNaN(t)||t<0){u("Enter a valid amount");return}o(!0);let s=await (0,n.Lu)(e,t);if(o(!1),s.error){u(s.error);return}r(null)},b=e.filter(e=>Number(e.current_balance)<=Number(e.low_threshold)),f=e.reduce((e,t)=>e+Number(t.current_balance),0);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Wallets"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[e.length," prepaid wallets"]})]}),b.length>0&&(0,s.jsxs)("div",{className:"bg-red-900/30 border border-red-800 rounded-xl px-5 py-4 flex items-center gap-3",children:[s.jsx("span",{className:"text-red-400 text-lg",children:"⚠"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-semibold text-red-300",children:[b.length," wallet",b.length>1?"s":""," below threshold"]}),s.jsx("p",{className:"text-xs text-red-400 mt-0.5",children:b.map(e=>e.tools?.name).join(", ")})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total Balance"}),(0,s.jsxs)("p",{className:"mt-1.5 text-xl font-bold text-white",children:["USD ",f.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Below Threshold"}),s.jsx("p",{className:`mt-1.5 text-xl font-bold ${b.length>0?"text-red-400":"text-white"}`,children:b.length})]}),(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total Wallets"}),s.jsx("p",{className:"mt-1.5 text-xl font-bold text-white",children:e.length})]})]}),s.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-gray-800",children:["Tool","Current Balance","Low Threshold","Status",""].map(e=>s.jsx("th",{className:"text-left px-5 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:0===e.length?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-5 py-10 text-center text-gray-500",children:"No wallets found"})}):e.map(e=>{let r=Number(e.current_balance)<=Number(e.low_threshold),a=Number(e.low_threshold)>0?Math.min(Number(e.current_balance)/(5*Number(e.low_threshold))*100,100):null;return(0,s.jsxs)("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[s.jsx("td",{className:"px-5 py-4",children:e.tools?(0,s.jsxs)("div",{children:[s.jsx(l.default,{href:`/tools/${e.tools.id}`,className:"font-medium text-indigo-400 hover:text-indigo-300",children:e.tools.name}),e.tools.category&&s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e.tools.category})]}):"—"}),(0,s.jsxs)("td",{className:"px-5 py-4",children:[t===e.id?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-400 text-sm",children:e.currency}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:i,onChange:e=>c(e.target.value),onKeyDown:t=>{"Enter"===t.key&&m(e.id),"Escape"===t.key&&p()},autoFocus:!0,className:"w-28 bg-gray-800 border border-indigo-500 text-white text-sm rounded px-2 py-1 focus:outline-none"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>h(e),title:"Click to update balance",className:`font-semibold hover:underline decoration-dashed underline-offset-2 cursor-pointer ${r?"text-red-400 hover:text-red-300":"text-white hover:text-indigo-300"}`,children:[e.currency," ",Number(e.current_balance).toFixed(2)]}),null!==a&&s.jsx("div",{className:"mt-1.5 h-1 w-24 bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full ${r?"bg-red-500":"bg-indigo-500"}`,style:{width:`${a}%`}})})]}),t===e.id&&x&&s.jsx("p",{className:"text-red-400 text-xs mt-1",children:x})]}),(0,s.jsxs)("td",{className:"px-5 py-4 text-gray-400",children:[e.currency," ",Number(e.low_threshold).toFixed(2)]}),s.jsx("td",{className:"px-5 py-4",children:r?s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-red-900 text-red-300",children:"Low"}):s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-green-900 text-green-300",children:"OK"})}),s.jsx("td",{className:"px-5 py-4 text-right",children:t===e.id?(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[s.jsx("button",{onClick:()=>m(e.id),disabled:d,className:"text-xs text-green-400 hover:text-green-300 font-medium transition-colors disabled:opacity-50",children:d?"...":"Save"}),s.jsx("button",{onClick:p,className:"text-xs text-gray-500 hover:text-white transition-colors",children:"Cancel"})]}):s.jsx(l.default,{href:`/wallets/${e.id}`,className:"text-indigo-400 hover:text-indigo-300 text-xs font-medium transition-colors",children:"View →"})})]},e.id)})})]})})]})}},7699:(e,t,r)=>{"use strict";r.d(t,{Lu:()=>a,g8:()=>n,ov:()=>l}),r(5424);var s=r(6242),a=(0,s.$)("bf101c4a2d0151cc365c52516efaa39600cd3f89"),l=(0,s.$)("3145bcfb98454fff9691cab0516a7d656ed286f5"),n=(0,s.$)("d9f093e597055cc2606b0c0469b5f518fcf0b9a0")},7676:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var s=r(326),a=r(434),l=r(5047),n=r(9701);let i=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function c(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),r=(0,n.e)(),c=async()=>{await r.auth.signOut(),t.push("/login")};return(0,s.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,s.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),s.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),s.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:i.map(({href:t,label:r,icon:l})=>{let n=e===t||e.startsWith(`${t}/`);return(0,s.jsxs)(a.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${n?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[s.jsx("span",{className:"text-base leading-none",children:l}),r]},t)})}),s.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,s.jsxs)("button",{onClick:c,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[s.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var s=r(861);let a=()=>(0,s.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},8927:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(9510),a=r(8585),l=r(5655);let n=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function i({children:e}){let t=await (0,l.e)(),{data:{user:r}}=await t.auth.getUser();return r||(0,a.redirect)("/login"),(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[s.jsx(n,{}),s.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},9989:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addTopUp:()=>n,setBalance:()=>c,updateThreshold:()=>i});var s=r(7745);r(6461);var a=r(1870),l=r(207);async function n(e,t){let r=await (0,a.e)(),{error:s}=await r.from("topup_transactions").insert({wallet_id:e,amount:t.amount,currency:t.currency,topped_up_by:t.topped_up_by||null,notes:t.notes||null});if(s)return{error:s.message};let{data:n}=await r.from("wallets").select("current_balance").eq("id",e).single();if(n){let{error:s}=await r.from("wallets").update({current_balance:Number(n.current_balance)+t.amount}).eq("id",e);if(s)return{error:s.message}}return(0,l.revalidatePath)("/wallets"),{error:null}}async function i(e,t){let r=await (0,a.e)(),{error:s}=await r.from("wallets").update({low_threshold:t}).eq("id",e);return s?{error:s.message}:((0,l.revalidatePath)("/wallets"),{error:null})}async function c(e,t){let r=await (0,a.e)(),{error:s}=await r.from("wallets").update({current_balance:t}).eq("id",e);return s?{error:s.message}:((0,l.revalidatePath)("/wallets"),(0,l.revalidatePath)("/dashboard"),{error:null})}(0,r(5723).h)([n,i,c]),(0,s.j)("3145bcfb98454fff9691cab0516a7d656ed286f5",n),(0,s.j)("d9f093e597055cc2606b0c0469b5f518fcf0b9a0",i),(0,s.j)("bf101c4a2d0151cc365c52516efaa39600cd3f89",c)},3882:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9510),a=r(5655);let l=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\app\(app)\wallets\WalletsClient.tsx#default`);async function n(){let e=await (0,a.e)(),{data:t}=await e.from("wallets").select("*, tools(id, name, category)").order("current_balance",{ascending:!0});return s.jsx(l,{wallets:t??[]})}},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>a});var s=r(9510);r(5023);let a={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function l({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},1870:(e,t,r)=>{"use strict";r.d(t,{e:()=>l});var s=r(6389),a=r(3973);let l=async()=>{let e=await (0,a.cookies)();return(0,s.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})}},5655:(e,t,r)=>{"use strict";r.d(t,{e:()=>l});var s=r(2728),a=r(1615);let l=async()=>{let e=await (0,a.cookies)();return(0,s.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,471,637,861,512,799],()=>r(946));module.exports=s})();