(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{2051:function(e,t,r){Promise.resolve().then(r.bind(r,6556))},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return l.a}});var s=r(2972),l=r.n(s)},2119:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return l}});let s=r(3079);function l(e){let{createServerReference:t}=r(6671);return t(e,s.callServer)}},6556:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var s=r(7437),l=r(2265),n=r(7648),a=r(3820);function d(e){let{wallets:t}=e,[r,d]=(0,l.useState)(null),[c,i]=(0,l.useState)(""),[o,x]=(0,l.useState)(!1),[u,h]=(0,l.useState)(null),m=e=>{d(e.id),i(Number(e.current_balance).toFixed(2)),h(null)},g=()=>{d(null),h(null)},b=async e=>{let t=parseFloat(c);if(isNaN(t)||t<0){h("Enter a valid amount");return}x(!0);let r=await (0,a.Lu)(e,t);if(x(!1),r.error){h(r.error);return}d(null)},f=t.filter(e=>Number(e.current_balance)<=Number(e.low_threshold)),p=t.reduce((e,t)=>e+Number(t.current_balance),0);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Wallets"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[t.length," prepaid wallets"]})]}),f.length>0&&(0,s.jsxs)("div",{className:"bg-red-900/30 border border-red-800 rounded-xl px-5 py-4 flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-red-400 text-lg",children:"⚠"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-semibold text-red-300",children:[f.length," wallet",f.length>1?"s":""," below threshold"]}),(0,s.jsx)("p",{className:"text-xs text-red-400 mt-0.5",children:f.map(e=>{var t;return null===(t=e.tools)||void 0===t?void 0:t.name}).join(", ")})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total Balance"}),(0,s.jsxs)("p",{className:"mt-1.5 text-xl font-bold text-white",children:["USD ",p.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Below Threshold"}),(0,s.jsx)("p",{className:"mt-1.5 text-xl font-bold ".concat(f.length>0?"text-red-400":"text-white"),children:f.length})]}),(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total Wallets"}),(0,s.jsx)("p",{className:"mt-1.5 text-xl font-bold text-white",children:t.length})]})]}),(0,s.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"border-b border-gray-800",children:["Tool","Current Balance","Low Threshold","Status",""].map(e=>(0,s.jsx)("th",{className:"text-left px-5 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-800",children:0===t.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"px-5 py-10 text-center text-gray-500",children:"No wallets found"})}):t.map(e=>{let t=Number(e.current_balance)<=Number(e.low_threshold),l=Number(e.low_threshold)>0?Math.min(Number(e.current_balance)/(5*Number(e.low_threshold))*100,100):null;return(0,s.jsxs)("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[(0,s.jsx)("td",{className:"px-5 py-4",children:e.tools?(0,s.jsxs)("div",{children:[(0,s.jsx)(n.default,{href:"/tools/".concat(e.tools.id),className:"font-medium text-indigo-400 hover:text-indigo-300",children:e.tools.name}),e.tools.category&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.tools.category})]}):"—"}),(0,s.jsxs)("td",{className:"px-5 py-4",children:[r===e.id?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:e.currency}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0",value:c,onChange:e=>i(e.target.value),onKeyDown:t=>{"Enter"===t.key&&b(e.id),"Escape"===t.key&&g()},autoFocus:!0,className:"w-28 bg-gray-800 border border-indigo-500 text-white text-sm rounded px-2 py-1 focus:outline-none"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>m(e),title:"Click to update balance",className:"font-semibold hover:underline decoration-dashed underline-offset-2 cursor-pointer ".concat(t?"text-red-400 hover:text-red-300":"text-white hover:text-indigo-300"),children:[e.currency," ",Number(e.current_balance).toFixed(2)]}),null!==l&&(0,s.jsx)("div",{className:"mt-1.5 h-1 w-24 bg-gray-800 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full ".concat(t?"bg-red-500":"bg-indigo-500"),style:{width:"".concat(l,"%")}})})]}),r===e.id&&u&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:u})]}),(0,s.jsxs)("td",{className:"px-5 py-4 text-gray-400",children:[e.currency," ",Number(e.low_threshold).toFixed(2)]}),(0,s.jsx)("td",{className:"px-5 py-4",children:t?(0,s.jsx)("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-red-900 text-red-300",children:"Low"}):(0,s.jsx)("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium bg-green-900 text-green-300",children:"OK"})}),(0,s.jsx)("td",{className:"px-5 py-4 text-right",children:r===e.id?(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>b(e.id),disabled:o,className:"text-xs text-green-400 hover:text-green-300 font-medium transition-colors disabled:opacity-50",children:o?"...":"Save"}),(0,s.jsx)("button",{onClick:g,className:"text-xs text-gray-500 hover:text-white transition-colors",children:"Cancel"})]}):(0,s.jsx)(n.default,{href:"/wallets/".concat(e.id),className:"text-indigo-400 hover:text-indigo-300 text-xs font-medium transition-colors",children:"View →"})})]},e.id)})})]})})]})}},3820:function(e,t,r){"use strict";r.d(t,{Lu:function(){return l},g8:function(){return a},ov:function(){return n}}),r(3079);var s=r(2119),l=(0,s.$)("bf101c4a2d0151cc365c52516efaa39600cd3f89"),n=(0,s.$)("3145bcfb98454fff9691cab0516a7d656ed286f5"),a=(0,s.$)("d9f093e597055cc2606b0c0469b5f518fcf0b9a0")}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=2051)}),_N_E=e.O()}]);