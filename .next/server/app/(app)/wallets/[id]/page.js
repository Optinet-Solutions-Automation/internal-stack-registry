(()=>{var e={};e.id=713,e.ids=[713],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1600:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o}),a(288),a(8927),a(5866),a(2029);var r=a(3191),s=a(8716),l=a(7922),n=a.n(l),i=a(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(t,c);let o=["",{children:["(app)",{children:["wallets",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,288)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\wallets\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\wallets\\[id]\\page.tsx"],u="/(app)/wallets/[id]/page",h={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(app)/wallets/[id]/page",pathname:"/wallets/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4665:(e,t,a)=>{let r={"3145bcfb98454fff9691cab0516a7d656ed286f5":()=>Promise.resolve().then(a.bind(a,9989)).then(e=>e.addTopUp),bf101c4a2d0151cc365c52516efaa39600cd3f89:()=>Promise.resolve().then(a.bind(a,9989)).then(e=>e.setBalance),d9f093e597055cc2606b0c0469b5f518fcf0b9a0:()=>Promise.resolve().then(a.bind(a,9989)).then(e=>e.updateThreshold)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"3145bcfb98454fff9691cab0516a7d656ed286f5":s.bind(null,"3145bcfb98454fff9691cab0516a7d656ed286f5"),bf101c4a2d0151cc365c52516efaa39600cd3f89:s.bind(null,"bf101c4a2d0151cc365c52516efaa39600cd3f89"),d9f093e597055cc2606b0c0469b5f518fcf0b9a0:s.bind(null,"d9f093e597055cc2606b0c0469b5f518fcf0b9a0")}},7881:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},8959:(e,t,a)=>{Promise.resolve().then(a.bind(a,8709))},4571:()=>{},3458:(e,t,a)=>{Promise.resolve().then(a.bind(a,7676))},8709:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var r=a(326),s=a(7577),l=a(434),n=a(7699);let i="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function c({title:e,children:t}){return(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 space-y-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:e}),t]})}function o({wallet:e,topups:t,burnRate:a,runway:o}){let[d,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(""),[x,m]=(0,s.useState)(e.currency),[b,g]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[v,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[_,I]=(0,s.useState)(String(e.low_threshold)),[C,P]=(0,s.useState)(!1),[k,S]=(0,s.useState)(!1),U=Number(e.current_balance)<=Number(e.low_threshold),M=async t=>{t.preventDefault();let a=parseFloat(h);if(!a||a<=0)return;j(!0),N(null);let r=await (0,n.ov)(e.id,{amount:a,currency:x,topped_up_by:b,notes:f});j(!1),r.error?N(r.error):(u(!1),p(""),g(""),y(""))},J=async t=>{t.preventDefault(),P(!0),await (0,n.g8)(e.id,parseFloat(_)||0),P(!1),S(!0),setTimeout(()=>S(!1),2e3)};return(0,r.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,r.jsxs)("div",{children:[r.jsx(l.default,{href:"/wallets",className:"text-sm text-gray-500 hover:text-gray-300 transition-colors",children:"← Back to Wallets"}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-3",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-white",children:[e.tools?.name??"Wallet"," — Wallet"]}),U&&r.jsx("span",{className:"bg-red-900 text-red-300 text-xs font-semibold px-2.5 py-1 rounded-full",children:"Low Balance"})]}),e.tools?.category&&r.jsx("p",{className:"mt-1 text-sm text-gray-400",children:e.tools.category})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Current Balance",value:`${e.currency} ${Number(e.current_balance).toFixed(2)}`,highlight:U?"text-red-400":"text-white"},{label:"Low Threshold",value:`${e.currency} ${Number(e.low_threshold).toFixed(2)}`,highlight:"text-white"},{label:"Avg Burn Rate",value:null!==a?`${e.currency} ${a.toFixed(2)}/mo`:"—",highlight:"text-white"},{label:"Est. Runway",value:null!==o?`${o.toFixed(1)} months`:"—",highlight:null!==o&&o<2?"text-red-400":"text-white"}].map(e=>(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e.label}),r.jsx("p",{className:`mt-1.5 text-lg font-bold ${e.highlight}`,children:e.value})]},e.label))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(c,{title:"Add Top-Up",children:d?(0,r.jsxs)("form",{onSubmit:M,className:"space-y-3",children:[w&&r.jsx("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-xs rounded-lg px-3 py-2",children:w}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs text-gray-400",children:"Amount *"}),r.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,value:h,onChange:e=>p(e.target.value),placeholder:"0.00",className:i})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs text-gray-400",children:"Currency"}),(0,r.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:i,children:[r.jsx("option",{value:"USD",children:"USD"}),r.jsx("option",{value:"PHP",children:"PHP"}),r.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs text-gray-400",children:"Topped Up By"}),r.jsx("input",{type:"text",value:b,onChange:e=>g(e.target.value),placeholder:"e.g. Finance",className:i})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs text-gray-400",children:"Notes"}),r.jsx("input",{type:"text",value:f,onChange:e=>y(e.target.value),placeholder:"Optional note",className:i})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-1",children:[r.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:v,className:"flex-1 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:v?"Saving...":"Confirm Top-Up"})]})]}):r.jsx("button",{onClick:()=>u(!0),className:"w-full py-2.5 border border-dashed border-gray-700 rounded-lg text-sm text-gray-400 hover:text-white hover:border-indigo-500 transition-colors",children:"+ Add Top-Up"})}),r.jsx(c,{title:"Threshold Settings",children:(0,r.jsxs)("form",{onSubmit:J,className:"space-y-3",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsxs)("label",{className:"text-xs text-gray-400",children:["Low Balance Threshold (",e.currency,")"]}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:_,onChange:e=>I(e.target.value),className:i})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"An alert will trigger when the balance drops below this amount."}),r.jsx("button",{type:"submit",disabled:C,className:"w-full py-2 bg-gray-800 hover:bg-gray-700 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:k?"✓ Saved":C?"Saving...":"Update Threshold"})]})})]}),r.jsx(c,{title:"Top-Up History",children:0===t.length?r.jsx("p",{className:"text-sm text-gray-500",children:"No top-ups recorded."}):(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-800",children:["Amount","By","Notes","Date"].map(e=>r.jsx("th",{className:"text-left pb-3 text-xs text-gray-500 font-semibold uppercase tracking-wider pr-4",children:e},e))})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"py-3 pr-4 font-semibold text-green-400",children:["+ ",e.currency," ",Number(e.amount).toFixed(2)]}),r.jsx("td",{className:"py-3 pr-4 text-gray-400",children:e.topped_up_by??"—"}),r.jsx("td",{className:"py-3 pr-4 text-gray-400",children:e.notes??"—"}),r.jsx("td",{className:"py-3 text-gray-500 text-xs",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})]})}},7699:(e,t,a)=>{"use strict";a.d(t,{Lu:()=>s,g8:()=>n,ov:()=>l}),a(5424);var r=a(6242),s=(0,r.$)("bf101c4a2d0151cc365c52516efaa39600cd3f89"),l=(0,r.$)("3145bcfb98454fff9691cab0516a7d656ed286f5"),n=(0,r.$)("d9f093e597055cc2606b0c0469b5f518fcf0b9a0")},7676:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(326),s=a(434),l=a(5047),n=a(9701);let i=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function c(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),a=(0,n.e)(),c=async()=>{await a.auth.signOut(),t.push("/login")};return(0,r.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,r.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),r.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:i.map(({href:t,label:a,icon:l})=>{let n=e===t||e.startsWith(`${t}/`);return(0,r.jsxs)(s.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${n?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[r.jsx("span",{className:"text-base leading-none",children:l}),a]},t)})}),r.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,r.jsxs)("button",{onClick:c,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[r.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,a)=>{"use strict";a.d(t,{e:()=>s});var r=a(861);let s=()=>(0,r.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},8927:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(9510),s=a(8585),l=a(5655);let n=(0,a(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function i({children:e}){let t=await (0,l.e)(),{data:{user:a}}=await t.auth.getUser();return a||(0,s.redirect)("/login"),(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[r.jsx(n,{}),r.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},288:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(9510),s=a(5655),l=a(8585);let n=(0,a(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\app\(app)\wallets\[id]\WalletDetailClient.tsx#default`);async function i({params:e}){let t=await (0,s.e)(),[{data:a},{data:i},{data:c}]=await Promise.all([t.from("wallets").select("*, tools(id, name, category)").eq("id",e.id).single(),t.from("topup_transactions").select("*").eq("wallet_id",e.id).order("created_at",{ascending:!1}),t.from("usage_logs").select("*").order("month",{ascending:!1}).limit(6)]);a||(0,l.notFound)();let o=(c??[]).filter(e=>e.tool_id===a.tools?.id),d=o.length>=2?(Number(o[0].usage_amount)+Number(o[1].usage_amount))/2:1===o.length?Number(o[0].usage_amount):null,u=d&&d>0?Number(a.current_balance)/d:null;return r.jsx(n,{wallet:a,topups:i??[],burnRate:d,runway:u})}},9989:(e,t,a)=>{"use strict";a.r(t),a.d(t,{addTopUp:()=>n,setBalance:()=>c,updateThreshold:()=>i});var r=a(7745);a(6461);var s=a(1870),l=a(207);async function n(e,t){let a=await (0,s.e)(),{error:r}=await a.from("topup_transactions").insert({wallet_id:e,amount:t.amount,currency:t.currency,topped_up_by:t.topped_up_by||null,notes:t.notes||null});if(r)return{error:r.message};let{data:n}=await a.from("wallets").select("current_balance").eq("id",e).single();if(n){let{error:r}=await a.from("wallets").update({current_balance:Number(n.current_balance)+t.amount}).eq("id",e);if(r)return{error:r.message}}return(0,l.revalidatePath)("/wallets"),{error:null}}async function i(e,t){let a=await (0,s.e)(),{error:r}=await a.from("wallets").update({low_threshold:t}).eq("id",e);return r?{error:r.message}:((0,l.revalidatePath)("/wallets"),{error:null})}async function c(e,t){let a=await (0,s.e)(),{error:r}=await a.from("wallets").update({current_balance:t}).eq("id",e);return r?{error:r.message}:((0,l.revalidatePath)("/wallets"),(0,l.revalidatePath)("/dashboard"),{error:null})}(0,a(5723).h)([n,i,c]),(0,r.j)("3145bcfb98454fff9691cab0516a7d656ed286f5",n),(0,r.j)("d9f093e597055cc2606b0c0469b5f518fcf0b9a0",i),(0,r.j)("bf101c4a2d0151cc365c52516efaa39600cd3f89",c)},2029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l,metadata:()=>s});var r=a(9510);a(5023);let s={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function l({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},1870:(e,t,a)=>{"use strict";a.d(t,{e:()=>l});var r=a(6389),s=a(3973);let l=async()=>{let e=await (0,s.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:a,options:r})=>e.set(t,a,r))}catch{}}}})}},5655:(e,t,a)=>{"use strict";a.d(t,{e:()=>l});var r=a(2728),s=a(1615);let l=async()=>{let e=await (0,s.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:a,options:r})=>e.set(t,a,r))}catch{}}}})}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,471,637,861,512,799],()=>a(1600));module.exports=r})();