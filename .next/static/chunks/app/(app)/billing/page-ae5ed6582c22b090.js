(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[696],{8569:function(e,t,l){Promise.resolve().then(l.bind(l,846))},7648:function(e,t,l){"use strict";l.d(t,{default:function(){return r.a}});var n=l(2972),r=l.n(n)},2119:function(e,t,l){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return r}});let n=l(3079);function r(e){let{createServerReference:t}=l(6671);return t(e,n.callServer)}},846:function(e,t,l){"use strict";l.d(t,{default:function(){return h}});var n=l(7437),r=l(2265),a=l(7648);l(3079);var s=(0,l(2119).$)("0a78a473c3795b71db7eccee569b5b5f4bd5c595");let i="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function c(e){let{label:t,children:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-gray-400",children:t}),l]})}let o={tool_id:"",plan_name:"",monthly_cost:0,currency:"USD",payment_frequency:"monthly",renewal_date:"",billing_owner:""};function d(e){let{tools:t,onClose:l}=e,[a,d]=(0,r.useState)(o),[x,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),p=(e,t)=>d(l=>({...l,[e]:t})),g=async e=>{if(e.preventDefault(),!a.tool_id)return;u(!0),h(null);let t=await s(a);u(!1),t.error?h(t.error):l()};return(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-md mx-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Add Subscription"}),(0,n.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),(0,n.jsxs)("form",{onSubmit:g,className:"px-6 py-5 space-y-4",children:[m&&(0,n.jsx)("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:m}),(0,n.jsx)(c,{label:"Tool *",children:(0,n.jsxs)("select",{value:a.tool_id,onChange:e=>p("tool_id",e.target.value),required:!0,className:i,children:[(0,n.jsx)("option",{value:"",children:"Select a tool..."}),t.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(c,{label:"Plan Name",children:(0,n.jsx)("input",{type:"text",value:a.plan_name,onChange:e=>p("plan_name",e.target.value),placeholder:"e.g. Pro",className:i})}),(0,n.jsx)(c,{label:"Frequency",children:(0,n.jsxs)("select",{value:a.payment_frequency,onChange:e=>p("payment_frequency",e.target.value),className:i,children:[(0,n.jsx)("option",{value:"monthly",children:"Monthly"}),(0,n.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,n.jsx)("option",{value:"annual",children:"Annual"})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(c,{label:"Monthly Cost *",children:(0,n.jsx)("input",{type:"number",step:"0.01",min:"0",value:a.monthly_cost,onChange:e=>p("monthly_cost",parseFloat(e.target.value)||0),required:!0,className:i})}),(0,n.jsx)(c,{label:"Currency",children:(0,n.jsxs)("select",{value:a.currency,onChange:e=>p("currency",e.target.value),className:i,children:[(0,n.jsx)("option",{value:"USD",children:"USD — US Dollar"}),(0,n.jsx)("option",{value:"PHP",children:"PHP — Philippine Peso"}),(0,n.jsx)("option",{value:"EUR",children:"EUR — Euro"})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(c,{label:"Renewal Date",children:(0,n.jsx)("input",{type:"date",value:a.renewal_date,onChange:e=>p("renewal_date",e.target.value),className:i})}),(0,n.jsx)(c,{label:"Billing Owner",children:(0,n.jsx)("input",{type:"text",value:a.billing_owner,onChange:e=>p("billing_owner",e.target.value),placeholder:"e.g. Finance",className:i})})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,n.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:x?"Saving...":"Add Subscription"})]})]})]})})}let x={monthly:"bg-blue-900 text-blue-300",quarterly:"bg-purple-900 text-purple-300",annual:"bg-indigo-900 text-indigo-300"};function u(e){return Math.ceil((new Date(e).getTime()-new Date().getTime())/864e5)}function m(e){let{date:t}=e;if(!t)return(0,n.jsx)("span",{className:"text-gray-500",children:"—"});let l=u(t),r=new Date(t).toLocaleDateString();return l<0?(0,n.jsxs)("span",{className:"text-red-400 font-medium",children:[r," (overdue)"]}):l<=14?(0,n.jsxs)("span",{className:"text-red-400 font-medium",children:[r," (",l,"d)"]}):l<=30?(0,n.jsxs)("span",{className:"text-yellow-400 font-medium",children:[r," (",l,"d)"]}):(0,n.jsx)("span",{className:"text-gray-300",children:r})}function h(e){let{subscriptions:t,tools:l}=e,[s,i]=(0,r.useState)(!1),[c,o]=(0,r.useState)(""),h=t.filter(e=>!c||e.payment_frequency===c),p=t.reduce((e,t)=>("monthly"===t.payment_frequency||"quarterly"===t.payment_frequency||t.payment_frequency,e+Number(t.monthly_cost)),0),g=t.filter(e=>{if(!e.renewal_date)return!1;let t=u(e.renewal_date);return t>=0&&t<=30}).length;return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Billing"}),(0,n.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[t.length," subscriptions"]})]}),(0,n.jsx)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium rounded-lg transition-colors",children:"+ Add Subscription"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total / Month"}),(0,n.jsxs)("p",{className:"mt-1.5 text-xl font-bold text-white",children:["USD ",p.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Renewing in 30 days"}),(0,n.jsx)("p",{className:"mt-1.5 text-xl font-bold ".concat(g>0?"text-yellow-400":"text-white"),children:g})]}),(0,n.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Active Subscriptions"}),(0,n.jsx)("p",{className:"mt-1.5 text-xl font-bold text-white",children:t.length})]})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[(0,n.jsx)("option",{value:"",children:"All Frequencies"}),(0,n.jsx)("option",{value:"monthly",children:"Monthly"}),(0,n.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,n.jsx)("option",{value:"annual",children:"Annual"})]}),c&&(0,n.jsx)("button",{onClick:()=>o(""),className:"text-sm text-gray-400 hover:text-white px-3 py-2 transition-colors",children:"Clear"})]}),(0,n.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{className:"border-b border-gray-800",children:["Tool","Plan","Monthly Cost","Frequency","Renewal Date","Billing Owner"].map(e=>(0,n.jsx)("th",{className:"text-left px-5 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,n.jsx)("tbody",{className:"divide-y divide-gray-800",children:0===h.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,className:"px-5 py-10 text-center text-gray-500",children:"No subscriptions found"})}):h.map(e=>{var t,l;return(0,n.jsxs)("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[(0,n.jsx)("td",{className:"px-5 py-4",children:e.tools?(0,n.jsxs)("div",{children:[(0,n.jsx)(a.default,{href:"/tools/".concat(e.tools.id),className:"font-medium text-indigo-400 hover:text-indigo-300",children:e.tools.name}),e.tools.category&&(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.tools.category})]}):"—"}),(0,n.jsx)("td",{className:"px-5 py-4 text-gray-300",children:null!==(t=e.plan_name)&&void 0!==t?t:"—"}),(0,n.jsxs)("td",{className:"px-5 py-4 font-medium text-white",children:[e.currency," ",Number(e.monthly_cost).toFixed(2)]}),(0,n.jsx)("td",{className:"px-5 py-4",children:(0,n.jsx)("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium capitalize ".concat(x[e.payment_frequency]),children:e.payment_frequency})}),(0,n.jsx)("td",{className:"px-5 py-4",children:(0,n.jsx)(m,{date:e.renewal_date})}),(0,n.jsx)("td",{className:"px-5 py-4 text-gray-400",children:null!==(l=e.billing_owner)&&void 0!==l?l:"—"})]},e.id)})})]})}),s&&(0,n.jsx)(d,{tools:l,onClose:()=>i(!1)})]})}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=8569)}),_N_E=e.O()}]);