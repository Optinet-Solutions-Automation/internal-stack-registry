(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{9027:function(e,t,s){Promise.resolve().then(s.bind(s,3808))},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var l=s(2972),a=s.n(l)},2119:function(e,t,s){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return a}});let l=s(3079);function a(e){let{createServerReference:t}=s(6671);return t(e,l.callServer)}},3808:function(e,t,s){"use strict";s.d(t,{default:function(){return h}});var l=s(7437),a=s(2265),r=s(7648),n=s(7999);let i="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function o(e){let{label:t,children:s}=e;return(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-gray-400",children:t}),s]})}let c={tool_id:"",type:"outage",severity:"medium",description:"",root_cause:"",financial_impact:null,resolution_steps:"",preventive_measures:"",status:"open",occurred_at:new Date().toISOString().slice(0,16)};function d(e){var t;let{tools:s,onClose:r}=e,[d,x]=(0,a.useState)(c),[u,g]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),v=(e,t)=>x(s=>({...s,[e]:t})),m=async e=>{if(e.preventDefault(),!d.tool_id)return;g(!0),h(null);let t=await (0,n.G)(d);g(!1),t.error?h(t.error):r()};return(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Log Incident"}),(0,l.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),(0,l.jsxs)("form",{onSubmit:m,className:"px-6 py-5 space-y-4",children:[p&&(0,l.jsx)("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:p}),(0,l.jsx)(o,{label:"Tool *",children:(0,l.jsxs)("select",{value:d.tool_id,onChange:e=>v("tool_id",e.target.value),required:!0,className:i,children:[(0,l.jsx)("option",{value:"",children:"Select a tool..."}),s.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsx)(o,{label:"Type",children:(0,l.jsxs)("select",{value:d.type,onChange:e=>v("type",e.target.value),className:i,children:[(0,l.jsx)("option",{value:"outage",children:"Outage"}),(0,l.jsx)("option",{value:"cost_spike",children:"Cost Spike"}),(0,l.jsx)("option",{value:"security",children:"Security"})]})}),(0,l.jsx)(o,{label:"Severity",children:(0,l.jsxs)("select",{value:d.severity,onChange:e=>v("severity",e.target.value),className:i,children:[(0,l.jsx)("option",{value:"low",children:"Low"}),(0,l.jsx)("option",{value:"medium",children:"Medium"}),(0,l.jsx)("option",{value:"high",children:"High"}),(0,l.jsx)("option",{value:"critical",children:"Critical"})]})}),(0,l.jsx)(o,{label:"Status",children:(0,l.jsxs)("select",{value:d.status,onChange:e=>v("status",e.target.value),className:i,children:[(0,l.jsx)("option",{value:"open",children:"Open"}),(0,l.jsx)("option",{value:"investigating",children:"Investigating"}),(0,l.jsx)("option",{value:"resolved",children:"Resolved"})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)(o,{label:"Occurred At",children:(0,l.jsx)("input",{type:"datetime-local",value:d.occurred_at,onChange:e=>v("occurred_at",e.target.value),className:i})}),(0,l.jsx)(o,{label:"Financial Impact (USD)",children:(0,l.jsx)("input",{type:"number",step:"0.01",min:"0",value:null!==(t=d.financial_impact)&&void 0!==t?t:"",onChange:e=>v("financial_impact",e.target.value?parseFloat(e.target.value):null),placeholder:"0.00",className:i})})]}),(0,l.jsx)(o,{label:"Description",children:(0,l.jsx)("textarea",{value:d.description,onChange:e=>v("description",e.target.value),rows:2,placeholder:"What happened?",className:"".concat(i," resize-none")})}),(0,l.jsx)(o,{label:"Root Cause",children:(0,l.jsx)("textarea",{value:d.root_cause,onChange:e=>v("root_cause",e.target.value),rows:2,placeholder:"Why did it happen?",className:"".concat(i," resize-none")})}),(0,l.jsx)(o,{label:"Resolution Steps",children:(0,l.jsx)("textarea",{value:d.resolution_steps,onChange:e=>v("resolution_steps",e.target.value),rows:2,placeholder:"How was it resolved?",className:"".concat(i," resize-none")})}),(0,l.jsx)(o,{label:"Preventive Measures",children:(0,l.jsx)("textarea",{value:d.preventive_measures,onChange:e=>v("preventive_measures",e.target.value),rows:2,placeholder:"How to prevent recurrence?",className:"".concat(i," resize-none")})}),(0,l.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,l.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:u?"Saving...":"Log Incident"})]})]})]})})}let x={low:"bg-green-900 text-green-300",medium:"bg-yellow-900 text-yellow-300",high:"bg-orange-900 text-orange-300",critical:"bg-red-900 text-red-300"},u={open:"bg-red-900 text-red-300",investigating:"bg-yellow-900 text-yellow-300",resolved:"bg-green-900 text-green-300"},g={outage:"bg-red-900 text-red-300",cost_spike:"bg-orange-900 text-orange-300",security:"bg-purple-900 text-purple-300"};function p(e){let{label:t,cls:s}=e;return(0,l.jsx)("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium capitalize ".concat(s),children:t.replace("_"," ")})}function h(e){let{incidents:t,tools:s}=e,[n,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(""),[h,v]=(0,a.useState)(""),[m,b]=(0,a.useState)(""),j=t.filter(e=>(!o||e.type===o)&&(!h||e.severity===h)&&(!m||e.status===m)),y=t.filter(e=>"open"===e.status).length,f=t.filter(e=>"investigating"===e.status).length,N=t.filter(e=>"critical"===e.severity&&"resolved"!==e.status).length;return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Incidents"}),(0,l.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[t.length," total incidents"]})]}),(0,l.jsx)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium rounded-lg transition-colors",children:"+ Log Incident"})]}),N>0&&(0,l.jsxs)("div",{className:"bg-red-900/30 border border-red-800 rounded-xl px-5 py-4 flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-red-400 text-lg",children:"⚠"}),(0,l.jsxs)("p",{className:"text-sm font-semibold text-red-300",children:[N," critical incident",N>1?"s":""," unresolved"]})]}),(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Open",value:y,cls:y>0?"text-red-400":"text-white"},{label:"Investigating",value:f,cls:f>0?"text-yellow-400":"text-white"},{label:"Critical",value:N,cls:N>0?"text-red-400":"text-white"},{label:"Total",value:t.length,cls:"text-white"}].map(e=>(0,l.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e.label}),(0,l.jsx)("p",{className:"mt-1.5 text-xl font-bold ".concat(e.cls),children:e.value})]},e.label))}),(0,l.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,l.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[(0,l.jsx)("option",{value:"",children:"All Types"}),(0,l.jsx)("option",{value:"outage",children:"Outage"}),(0,l.jsx)("option",{value:"cost_spike",children:"Cost Spike"}),(0,l.jsx)("option",{value:"security",children:"Security"})]}),(0,l.jsxs)("select",{value:h,onChange:e=>v(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[(0,l.jsx)("option",{value:"",children:"All Severities"}),(0,l.jsx)("option",{value:"low",children:"Low"}),(0,l.jsx)("option",{value:"medium",children:"Medium"}),(0,l.jsx)("option",{value:"high",children:"High"}),(0,l.jsx)("option",{value:"critical",children:"Critical"})]}),(0,l.jsxs)("select",{value:m,onChange:e=>b(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[(0,l.jsx)("option",{value:"",children:"All Statuses"}),(0,l.jsx)("option",{value:"open",children:"Open"}),(0,l.jsx)("option",{value:"investigating",children:"Investigating"}),(0,l.jsx)("option",{value:"resolved",children:"Resolved"})]}),(o||h||m)&&(0,l.jsx)("button",{onClick:()=>{c(""),v(""),b("")},className:"text-sm text-gray-400 hover:text-white px-3 py-2 transition-colors",children:"Clear"})]}),(0,l.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{className:"border-b border-gray-800",children:["Tool","Type","Description","Severity","Status","Date",""].map(e=>(0,l.jsx)("th",{className:"text-left px-5 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-800",children:0===j.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:7,className:"px-5 py-10 text-center text-gray-500",children:"No incidents found"})}):j.map(e=>{var t;return(0,l.jsxs)("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[(0,l.jsx)("td",{className:"px-5 py-4",children:e.tools?(0,l.jsx)(r.default,{href:"/tools/".concat(e.tools.id),className:"font-medium text-indigo-400 hover:text-indigo-300",children:e.tools.name}):"—"}),(0,l.jsx)("td",{className:"px-5 py-4",children:(0,l.jsx)(p,{label:e.type,cls:g[e.type]})}),(0,l.jsx)("td",{className:"px-5 py-4 text-gray-400 max-w-xs truncate",children:null!==(t=e.description)&&void 0!==t?t:"—"}),(0,l.jsx)("td",{className:"px-5 py-4",children:(0,l.jsx)(p,{label:e.severity,cls:x[e.severity]})}),(0,l.jsx)("td",{className:"px-5 py-4",children:(0,l.jsx)(p,{label:e.status,cls:u[e.status]})}),(0,l.jsx)("td",{className:"px-5 py-4 text-gray-500 text-xs whitespace-nowrap",children:new Date(e.occurred_at).toLocaleDateString()}),(0,l.jsx)("td",{className:"px-5 py-4 text-right",children:(0,l.jsx)(r.default,{href:"/incidents/".concat(e.id),className:"text-indigo-400 hover:text-indigo-300 text-xs font-medium transition-colors",children:"View →"})})]},e.id)})})]})}),n&&(0,l.jsx)(d,{tools:s,onClose:()=>i(!1)})]})}},7999:function(e,t,s){"use strict";s.d(t,{G:function(){return r},o:function(){return a}}),s(3079);var l=s(2119),a=(0,l.$)("95467358ab31f082e55905055ec53a2e3d688099"),r=(0,l.$)("15ddf9ee9e002025c540d0c2f6e0bed38d32abc4")}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=9027)}),_N_E=e.O()}]);