(()=>{var e={};e.id=628,e.ids=[628],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7078:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d}),s(5224),s(8927),s(5866),s(2029);var r=s(3191),a=s(8716),l=s(7922),i=s.n(l),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["(app)",{children:["usage",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5224)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\usage\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\usage\\page.tsx"],u="/(app)/usage/page",x={require:s,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/usage/page",pathname:"/usage",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9672:(e,t,s)=>{let r={"3670185253f71efaab779c07c78614f02404a959":()=>Promise.resolve().then(s.bind(s,4821)).then(e=>e.logUsage)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={"3670185253f71efaab779c07c78614f02404a959":a.bind(null,"3670185253f71efaab779c07c78614f02404a959")}},7881:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},7926:(e,t,s)=>{Promise.resolve().then(s.bind(s,132))},4571:()=>{},3458:(e,t,s)=>{Promise.resolve().then(s.bind(s,7676))},132:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var r=s(326),a=s(7577),l=s(434);s(5424);var i=(0,s(6242).$)("3670185253f71efaab779c07c78614f02404a959");let n="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function o({label:e,children:t}){return(0,r.jsxs)("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400",children:e}),t]})}let d=new Date,c=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-01`;function u({tools:e,onClose:t}){let[s,l]=(0,a.useState)({tool_id:"",month:c,usage_amount:0,currency:"USD",budget_limit:null}),[d,u]=(0,a.useState)(!1),[x,g]=(0,a.useState)(null),m=(e,t)=>l(s=>({...s,[e]:t})),h=async e=>{if(e.preventDefault(),!s.tool_id)return;u(!0),g(null);let r=await i(s);u(!1),r.error?g(r.error):t()};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Log Usage"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:h,className:"px-6 py-5 space-y-4",children:[x&&r.jsx("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:x}),r.jsx(o,{label:"Tool *",children:(0,r.jsxs)("select",{value:s.tool_id,onChange:e=>m("tool_id",e.target.value),required:!0,className:n,children:[r.jsx("option",{value:"",children:"Select a tool..."}),e.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})}),r.jsx(o,{label:"Month *",children:r.jsx("input",{type:"month",value:s.month.slice(0,7),onChange:e=>m("month",`${e.target.value}-01`),required:!0,className:n})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(o,{label:"Usage Amount *",children:r.jsx("input",{type:"number",step:"0.0001",min:"0",required:!0,value:s.usage_amount,onChange:e=>m("usage_amount",parseFloat(e.target.value)||0),className:n})}),r.jsx(o,{label:"Currency",children:(0,r.jsxs)("select",{value:s.currency,onChange:e=>m("currency",e.target.value),className:n,children:[r.jsx("option",{value:"USD",children:"USD"}),r.jsx("option",{value:"PHP",children:"PHP"}),r.jsx("option",{value:"EUR",children:"EUR"})]})})]}),r.jsx(o,{label:"Budget Limit",children:r.jsx("input",{type:"number",step:"0.01",min:"0",value:s.budget_limit??"",onChange:e=>m("budget_limit",e.target.value?parseFloat(e.target.value):null),placeholder:"Optional",className:n})}),r.jsx("p",{className:"text-xs text-gray-500",children:"If an entry already exists for this tool + month, it will be updated."}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:d?"Saving...":"Log Usage"})]})]})]})})}function x({usage:e,limit:t}){if(!t)return r.jsx("span",{className:"text-gray-500 text-xs",children:"No limit set"});let s=Math.min(e/t*100,100),a=e>t;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 h-1.5 bg-gray-800 rounded-full overflow-hidden min-w-16",children:r.jsx("div",{className:`h-full rounded-full ${a?"bg-red-500":s>=80?"bg-yellow-500":"bg-indigo-500"}`,style:{width:`${s}%`}})}),(0,r.jsxs)("span",{className:`text-xs font-medium w-10 text-right ${a?"text-red-400":s>=80?"text-yellow-400":"text-gray-400"}`,children:[s.toFixed(0),"%"]})]})}function g(e){return new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"})}function m({usageLogs:e,tools:t}){let[s,i]=(0,a.useState)(!1),[n,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),m=[...new Set(e.map(e=>e.month.slice(0,7)))].sort().reverse(),h=[...new Set(e.map(e=>e.tools?.name).filter(Boolean))],p=new Date().toISOString().slice(0,7),b=e.filter(e=>e.month.startsWith(p)),y=b.reduce((e,t)=>e+Number(t.usage_amount),0),f=b.filter(e=>e.budget_limit&&Number(e.usage_amount)>Number(e.budget_limit)).length,j=e.filter(e=>(!n||e.tools?.name===n)&&(!d||!!e.month.startsWith(d)));return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Usage"}),r.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"Monthly usage tracking and budget monitoring"})]}),r.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium rounded-lg transition-colors",children:"+ Log Usage"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"This Month Spend"}),r.jsx("p",{className:"mt-1.5 text-xl font-bold text-white",children:y>0?`USD ${y.toFixed(2)}`:"—"})]}),(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Over Budget"}),r.jsx("p",{className:`mt-1.5 text-xl font-bold ${f>0?"text-red-400":"text-white"}`,children:f})]}),(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total Entries"}),r.jsx("p",{className:"mt-1.5 text-xl font-bold text-white",children:e.length})]})]}),f>0&&(0,r.jsxs)("div",{className:"bg-red-900/30 border border-red-800 rounded-xl px-5 py-4 flex items-center gap-3",children:[r.jsx("span",{className:"text-red-400 text-lg",children:"⚠"}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-red-300",children:[f," tool",f>1?"s":""," exceeded budget this month"]})]}),(0,r.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,r.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"All Tools"}),h.map(e=>r.jsx("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"All Months"}),m.map(e=>r.jsx("option",{value:e,children:g(`${e}-01`)},e))]}),(n||d)&&r.jsx("button",{onClick:()=>{o(""),c("")},className:"text-sm text-gray-400 hover:text-white px-3 py-2 transition-colors",children:"Clear"})]}),r.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-800",children:["Tool","Month","Usage Amount","Budget Limit","Budget Used","Currency"].map(e=>r.jsx("th",{className:"text-left px-5 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:0===j.length?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-5 py-10 text-center text-gray-500",children:"No usage data found"})}):j.map(e=>{let t=e.budget_limit&&Number(e.usage_amount)>Number(e.budget_limit);return(0,r.jsxs)("tr",{className:`hover:bg-gray-800/50 transition-colors ${t?"bg-red-950/20":""}`,children:[r.jsx("td",{className:"px-5 py-4",children:e.tools?r.jsx(l.default,{href:`/tools/${e.tools.id}`,className:"font-medium text-indigo-400 hover:text-indigo-300",children:e.tools.name}):"—"}),r.jsx("td",{className:"px-5 py-4 text-gray-300",children:g(e.month)}),r.jsx("td",{className:"px-5 py-4",children:r.jsx("span",{className:`font-semibold ${t?"text-red-400":"text-white"}`,children:Number(e.usage_amount).toFixed(4)})}),r.jsx("td",{className:"px-5 py-4 text-gray-400",children:e.budget_limit?Number(e.budget_limit).toFixed(2):"—"}),r.jsx("td",{className:"px-5 py-4 w-40",children:r.jsx(x,{usage:Number(e.usage_amount),limit:e.budget_limit?Number(e.budget_limit):null})}),r.jsx("td",{className:"px-5 py-4 text-gray-400",children:e.currency})]},e.id)})})]})}),s&&r.jsx(u,{tools:t,onClose:()=>i(!1)})]})}},7676:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(326),a=s(434),l=s(5047),i=s(9701);let n=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function o(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),s=(0,i.e)(),o=async()=>{await s.auth.signOut(),t.push("/login")};return(0,r.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,r.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),r.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:n.map(({href:t,label:s,icon:l})=>{let i=e===t||e.startsWith(`${t}/`);return(0,r.jsxs)(a.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${i?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[r.jsx("span",{className:"text-base leading-none",children:l}),s]},t)})}),r.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,r.jsxs)("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[r.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,s)=>{"use strict";s.d(t,{e:()=>a});var r=s(861);let a=()=>(0,r.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},8927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(9510),a=s(8585),l=s(5655);let i=(0,s(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function n({children:e}){let t=await (0,l.e)(),{data:{user:s}}=await t.auth.getUser();return s||(0,a.redirect)("/login"),(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[r.jsx(i,{}),r.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},4821:(e,t,s)=>{"use strict";s.r(t),s.d(t,{logUsage:()=>i});var r=s(7745);s(6461);var a=s(1870),l=s(207);async function i(e){let t=await (0,a.e)(),{error:s}=await t.from("usage_logs").upsert({tool_id:e.tool_id,month:e.month,usage_amount:e.usage_amount,currency:e.currency,budget_limit:e.budget_limit},{onConflict:"tool_id,month"});return s?{error:s.message}:((0,l.revalidatePath)("/usage"),{error:null})}(0,s(5723).h)([i]),(0,r.j)("3670185253f71efaab779c07c78614f02404a959",i)},5224:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(9510),a=s(5655);let l=(0,s(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\app\(app)\usage\UsageClient.tsx#default`);async function i(){let e=await (0,a.e)(),[{data:t},{data:s}]=await Promise.all([e.from("usage_logs").select("*, tools(id, name, category, billing_type)").order("month",{ascending:!1}),e.from("tools").select("id, name").in("billing_type",["usage","wallet"]).eq("status","active").order("name")]);return r.jsx(l,{usageLogs:t??[],tools:s??[]})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>a});var r=s(9510);s(5023);let a={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function l({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},1870:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var r=s(6389),a=s(3973);let l=async()=>{let e=await (0,a.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}},5655:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var r=s(2728),a=s(1615);let l=async()=>{let e=await (0,a.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,471,637,861,512,799],()=>s(7078));module.exports=r})();