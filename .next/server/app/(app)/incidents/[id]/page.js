(()=>{var e={};e.id=19,e.ids=[19],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2404:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(4400),s(8927),s(5866),s(2029);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["(app)",{children:["incidents",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4400)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\incidents\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\incidents\\[id]\\page.tsx"],u="/(app)/incidents/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/incidents/[id]/page",pathname:"/incidents/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6017:(e,t,s)=>{let r={"15ddf9ee9e002025c540d0c2f6e0bed38d32abc4":()=>Promise.resolve().then(s.bind(s,7074)).then(e=>e.logIncident),"95467358ab31f082e55905055ec53a2e3d688099":()=>Promise.resolve().then(s.bind(s,7074)).then(e=>e.resolveIncident)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={"15ddf9ee9e002025c540d0c2f6e0bed38d32abc4":a.bind(null,"15ddf9ee9e002025c540d0c2f6e0bed38d32abc4"),"95467358ab31f082e55905055ec53a2e3d688099":a.bind(null,"95467358ab31f082e55905055ec53a2e3d688099")}},7881:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},3110:(e,t,s)=>{Promise.resolve().then(s.bind(s,8844))},4571:()=>{},3458:(e,t,s)=>{Promise.resolve().then(s.bind(s,7676))},8844:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var r=s(326),a=s(7577),i=s(434),n=s(9656);let l={low:"bg-green-900 text-green-300",medium:"bg-yellow-900 text-yellow-300",high:"bg-orange-900 text-orange-300",critical:"bg-red-900 text-red-300"},o={open:"bg-red-900 text-red-300",investigating:"bg-yellow-900 text-yellow-300",resolved:"bg-green-900 text-green-300"},c={outage:"bg-red-900 text-red-300",cost_spike:"bg-orange-900 text-orange-300",security:"bg-purple-900 text-purple-300"};function d({label:e,cls:t}){return r.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs font-medium capitalize ${t}`,children:e.replace("_"," ")})}function u({title:e,children:t}){return(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 space-y-3",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:e}),t]})}function p({incident:e}){let[t,s]=(0,a.useState)(""),[p,x]=(0,a.useState)(!1),[g,m]=(0,a.useState)(!1),[h,b]=(0,a.useState)(null),y=async s=>{s.preventDefault(),x(!0),b(null);let r=await (0,n.o)(e.id,t);x(!1),r.error?b(r.error):m(!1)};return(0,r.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,r.jsxs)("div",{children:[r.jsx(i.default,{href:"/incidents",className:"text-sm text-gray-500 hover:text-gray-300 transition-colors",children:"← Back to Incidents"}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-3 flex-wrap",children:[r.jsx("h1",{className:"text-2xl font-bold text-white capitalize",children:e.type.replace("_"," ")}),r.jsx(d,{label:e.severity,cls:l[e.severity]}),r.jsx(d,{label:e.status,cls:o[e.status]}),r.jsx(d,{label:e.type,cls:c[e.type]})]}),e.tools&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-400",children:["Tool: ",r.jsx(i.default,{href:`/tools/${e.tools.id}`,className:"text-indigo-400 hover:text-indigo-300",children:e.tools.name})]})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Occurred",value:new Date(e.occurred_at).toLocaleDateString()},{label:"Financial Impact",value:null!=e.financial_impact?`USD ${Number(e.financial_impact).toFixed(2)}`:"—"},{label:"Resolved By",value:e.resolved_by??"—"},{label:"Resolved At",value:e.resolved_at?new Date(e.resolved_at).toLocaleDateString():"—"}].map(e=>(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e.label}),r.jsx("p",{className:"mt-1.5 text-sm font-semibold text-white",children:e.value})]},e.label))}),r.jsx(u,{title:"Description",children:r.jsx("p",{className:"text-sm text-gray-300",children:e.description??"No description provided."})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(u,{title:"Root Cause",children:r.jsx("p",{className:"text-sm text-gray-300",children:e.root_cause??"—"})}),r.jsx(u,{title:"Resolution Steps",children:r.jsx("p",{className:"text-sm text-gray-300",children:e.resolution_steps??"—"})})]}),r.jsx(u,{title:"Preventive Measures",children:r.jsx("p",{className:"text-sm text-gray-300",children:e.preventive_measures??"—"})}),"resolved"!==e.status&&(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Resolve Incident"}),g?(0,r.jsxs)("form",{onSubmit:y,className:"space-y-3 max-w-sm",children:[h&&r.jsx("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-xs rounded-lg px-3 py-2",children:h}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs text-gray-400",children:"Resolved By"}),r.jsx("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"Your name",className:"w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-green-700 hover:bg-green-600 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:p?"Saving...":"Confirm"})]})]}):r.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-green-700 hover:bg-green-600 text-white text-sm font-medium rounded-lg transition-colors",children:"Mark as Resolved"})]})]})}},9656:(e,t,s)=>{"use strict";s.d(t,{G:()=>i,o:()=>a}),s(5424);var r=s(6242),a=(0,r.$)("95467358ab31f082e55905055ec53a2e3d688099"),i=(0,r.$)("15ddf9ee9e002025c540d0c2f6e0bed38d32abc4")},7676:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(326),a=s(434),i=s(5047),n=s(9701);let l=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function o(){let e=(0,i.usePathname)(),t=(0,i.useRouter)(),s=(0,n.e)(),o=async()=>{await s.auth.signOut(),t.push("/login")};return(0,r.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,r.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),r.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:l.map(({href:t,label:s,icon:i})=>{let n=e===t||e.startsWith(`${t}/`);return(0,r.jsxs)(a.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${n?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[r.jsx("span",{className:"text-base leading-none",children:i}),s]},t)})}),r.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,r.jsxs)("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[r.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,s)=>{"use strict";s.d(t,{e:()=>a});var r=s(861);let a=()=>(0,r.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},4400:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(9510),a=s(5655),i=s(8585);let n=(0,s(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\app\(app)\incidents\[id]\IncidentDetailClient.tsx#default`);async function l({params:e}){let t=await (0,a.e)(),{data:s}=await t.from("incident_logs").select("*, tools(id, name, category)").eq("id",e.id).single();return s||(0,i.notFound)(),r.jsx(n,{incident:s})}},7074:(e,t,s)=>{"use strict";s.r(t),s.d(t,{logIncident:()=>n,resolveIncident:()=>l});var r=s(7745);s(6461);var a=s(1870),i=s(207);async function n(e){let t=await (0,a.e)(),{error:s}=await t.from("incident_logs").insert({tool_id:e.tool_id,type:e.type,severity:e.severity,description:e.description||null,root_cause:e.root_cause||null,financial_impact:e.financial_impact,resolution_steps:e.resolution_steps||null,preventive_measures:e.preventive_measures||null,status:e.status,occurred_at:e.occurred_at||new Date().toISOString()});return s?{error:s.message}:((0,i.revalidatePath)("/incidents"),{error:null})}async function l(e,t){let s=await (0,a.e)(),{error:r}=await s.from("incident_logs").update({status:"resolved",resolved_by:t||null,resolved_at:new Date().toISOString()}).eq("id",e);return r?{error:r.message}:((0,i.revalidatePath)("/incidents"),(0,i.revalidatePath)(`/incidents/${e}`),{error:null})}(0,s(5723).h)([n,l]),(0,r.j)("15ddf9ee9e002025c540d0c2f6e0bed38d32abc4",n),(0,r.j)("95467358ab31f082e55905055ec53a2e3d688099",l)},8927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(9510),a=s(8585),i=s(5655);let n=(0,s(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function l({children:e}){let t=await (0,i.e)(),{data:{user:s}}=await t.auth.getUser();return s||(0,a.redirect)("/login"),(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[r.jsx(n,{}),r.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>a});var r=s(9510);s(5023);let a={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},1870:(e,t,s)=>{"use strict";s.d(t,{e:()=>i});var r=s(6389),a=s(3973);let i=async()=>{let e=await (0,a.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}},5655:(e,t,s)=>{"use strict";s.d(t,{e:()=>i});var r=s(2728),a=s(1615);let i=async()=>{let e=await (0,a.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,471,637,861,512,799],()=>s(2404));module.exports=r})();