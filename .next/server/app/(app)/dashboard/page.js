(()=>{var e={};e.id=40,e.ids=[40],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8186:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>g,originalPathname:()=>h,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(1544),s(8927),s(5866),s(2029);var r=s(3191),l=s(8716),a=s(7922),i=s.n(a),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["(app)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1544)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\dashboard\\page.tsx"],h="/(app)/dashboard/page",g={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(app)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7881:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8140:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23))},4571:()=>{},3458:(e,t,s)=>{Promise.resolve().then(s.bind(s,7676))},7676:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(326),l=s(434),a=s(5047),i=s(9701);let n=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function o(){let e=(0,a.usePathname)(),t=(0,a.useRouter)(),s=(0,i.e)(),o=async()=>{await s.auth.signOut(),t.push("/login")};return(0,r.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,r.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),r.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:n.map(({href:t,label:s,icon:a})=>{let i=e===t||e.startsWith(`${t}/`);return(0,r.jsxs)(l.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${i?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[r.jsx("span",{className:"text-base leading-none",children:a}),s]},t)})}),r.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,r.jsxs)("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[r.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var r=s(861);let l=()=>(0,r.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},7371:(e,t,s)=>{"use strict";s.d(t,{default:()=>l.a});var r=s(1812),l=s.n(r)},1812:(e,t,s)=>{"use strict";let{createProxy:r}=s(8570);e.exports=r("C:\\Users\\Chris-Optinet\\internal-stack-registry\\node_modules\\next\\dist\\client\\link.js")},1544:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(9510),l=s(5655),a=s(7371);function i({label:e,value:t,sub:s,href:l,highlight:i}){let n=(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-5 space-y-1 hover:border-gray-700 transition-colors",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e}),r.jsx("p",{className:`text-2xl font-bold ${"red"===i?"text-red-400":"yellow"===i?"text-yellow-400":"green"===i?"text-green-400":"text-white"}`,children:t}),s&&r.jsx("p",{className:"text-xs text-gray-500",children:s})]});return l?r.jsx(a.default,{href:l,children:n}):n}function n({children:e}){return r.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e})}function o({data:e}){let t=Math.max(...e.map(e=>e.value),1);return r.jsx("div",{className:"space-y-3",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xs text-gray-500 w-20 shrink-0 text-right",children:e.label}),r.jsx("div",{className:"flex-1 h-5 bg-gray-800 rounded overflow-hidden",children:r.jsx("div",{className:"h-full bg-indigo-600 rounded flex items-center px-2 transition-all",style:{width:`${e.value/t*100}%`,minWidth:e.value>0?"2rem":"0"},children:e.value>0&&(0,r.jsxs)("span",{className:"text-xs text-white font-medium whitespace-nowrap",children:[e.currency," ",e.value.toFixed(2)]})})})]},e.label))})}async function c(){let e=await (0,l.e)(),[{data:t},{data:s},{data:c},{data:d},{data:h},{data:g}]=await Promise.all([e.from("tools").select("id, name, critical, risk_level, status, billing_type"),e.from("billing_subscriptions").select("monthly_cost, currency, renewal_date, tools(name)"),e.from("wallets").select("current_balance, low_threshold, currency, tools(id, name)"),e.from("usage_logs").select("usage_amount, budget_limit, currency, month, tools(id, name)").order("month",{ascending:!1}),e.from("incident_logs").select("id, severity, status, type, tools(name)").neq("status","resolved"),e.from("credential_reference").select("last_rotated, rotation_policy, tools(name)")]),u=new Date,x=u.toISOString().slice(0,7),m=(s??[]).reduce((e,t)=>e+Number(t.monthly_cost),0),p=(d??[]).filter(e=>e.month.startsWith(x)),b=p.reduce((e,t)=>e+Number(t.usage_amount),0),f=(c??[]).reduce((e,t)=>e+Number(t.current_balance),0),y=(t??[]).filter(e=>"active"===e.status),v=y.filter(e=>e.critical),j=y.filter(e=>"high"===e.risk_level||"critical"===e.risk_level),w=(c??[]).filter(e=>Number(e.current_balance)<=Number(e.low_threshold)),N=p.filter(e=>e.budget_limit&&Number(e.usage_amount)>Number(e.budget_limit)),_=(h??[]).filter(e=>"open"===e.status||"investigating"===e.status),k=_.filter(e=>"critical"===e.severity),I=(s??[]).filter(e=>{if(!e.renewal_date)return!1;let t=Math.ceil((new Date(e.renewal_date).getTime()-u.getTime())/864e5);return t>=0&&t<=30}),S=(g??[]).filter(e=>{if(!e.last_rotated||!e.rotation_policy)return!1;let t=e.rotation_policy.match(/(\d+)/);if(!t)return!1;let s=parseInt(t[1]);return Math.floor((u.getTime()-new Date(e.last_rotated).getTime())/864e5)>s}),C={};for(let e of d??[]){let t=e.month.slice(0,7);C[t]=(C[t]??0)+Number(e.usage_amount)}let P=Object.entries(C).sort(([e],[t])=>e.localeCompare(t)).slice(-6).map(([e,t])=>({label:new Date(`${e}-01`).toLocaleDateString("en-US",{month:"short",year:"2-digit"}),value:t,currency:"USD"}));return(0,r.jsxs)("div",{className:"space-y-8 max-w-5xl",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard"}),r.jsx("p",{className:"mt-1 text-sm text-gray-400",children:u.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx(n,{children:"Cost Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(i,{label:"Fixed / Month",value:`USD ${m.toFixed(2)}`,sub:`${s?.length??0} subscriptions`,href:"/billing"}),r.jsx(i,{label:"Variable This Month",value:b>0?`USD ${b.toFixed(2)}`:"—",sub:"from usage logs",href:"/usage"}),r.jsx(i,{label:"Total Wallet Balance",value:`USD ${f.toFixed(2)}`,sub:`${c?.length??0} wallets`,href:"/wallets"}),r.jsx(i,{label:"Total / Month Est.",value:`USD ${(m+b).toFixed(2)}`,sub:"fixed + variable"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx(n,{children:"Risk & Health"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(i,{label:"Critical Tools",value:String(v.length),sub:`${j.length} high risk`,href:"/tools",highlight:v.length>0?"red":void 0}),r.jsx(i,{label:"Low Balance Wallets",value:String(w.length),sub:"below threshold",href:"/wallets",highlight:w.length>0?"red":void 0}),r.jsx(i,{label:"Over Budget",value:String(N.length),sub:"this month",href:"/usage",highlight:N.length>0?"yellow":void 0}),r.jsx(i,{label:"Open Incidents",value:String(_.length),sub:`${k.length} critical`,href:"/incidents",highlight:k.length>0?"red":_.length>0?"yellow":void 0})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx(n,{children:"Action Items"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(i,{label:"Renewals in 30 Days",value:String(I.length),sub:"subscriptions",href:"/billing",highlight:I.length>0?"yellow":void 0}),r.jsx(i,{label:"Credentials Overdue",value:String(S.length),sub:"rotation due",href:"/credentials",highlight:S.length>0?"yellow":void 0}),r.jsx(i,{label:"Active Tools",value:String(y.length),sub:`of ${t?.length??0} total`,href:"/tools"}),r.jsx(i,{label:"Total Alerts",value:String(w.length+N.length+I.length+S.length+_.length),sub:"across all modules",href:"/alerts",highlight:k.length>0||w.length>0?"red":void 0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 space-y-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:"Variable Spend Trend"}),P.length>0?r.jsx(o,{data:P}):r.jsx("p",{className:"text-sm text-gray-500",children:"No usage data logged yet."})]}),(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 space-y-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:"Quick Access"}),r.jsx("div",{className:"space-y-2",children:[{href:"/tools",label:"Tools Registry",count:`${y.length} active`},{href:"/billing",label:"Billing & Subscriptions",count:`USD ${m.toFixed(2)}/mo`},{href:"/wallets",label:"Wallets",count:`USD ${f.toFixed(2)} total`},{href:"/incidents",label:"Open Incidents",count:`${_.length} open`,warn:_.length>0},{href:"/alerts",label:"All Alerts",count:`${w.length+N.length+I.length+S.length+_.length} active`,warn:k.length>0},{href:"/credentials",label:"Credentials",count:`${S.length} overdue`,warn:S.length>0}].map(e=>(0,r.jsxs)(a.default,{href:e.href,className:"flex items-center justify-between px-4 py-2.5 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors",children:[r.jsx("span",{className:"text-sm text-gray-200",children:e.label}),r.jsx("span",{className:`text-xs font-medium ${e.warn?"text-red-400":"text-gray-400"}`,children:e.count})]},e.href))})]})]})]})}},8927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(9510),l=s(8585),a=s(5655);let i=(0,s(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function n({children:e}){let t=await (0,a.e)(),{data:{user:s}}=await t.auth.getUser();return s||(0,l.redirect)("/login"),(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[r.jsx(i,{}),r.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,metadata:()=>l});var r=s(9510);s(5023);let l={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function a({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},5655:(e,t,s)=>{"use strict";s.d(t,{e:()=>a});var r=s(2728),l=s(1615);let a=async()=>{let e=await (0,l.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,471,637,861,512],()=>s(8186));module.exports=r})();