(()=>{var e={};e.id=696,e.ids=[696],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3634:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(5726),r(8927),r(5866),r(2029);var s=r(3191),l=r(8716),a=r(7922),n=r.n(a),i=r(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let c=["",{children:["(app)",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5726)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\billing\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\billing\\page.tsx"],x="/(app)/billing/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(app)/billing/page",pathname:"/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8414:(e,t,r)=>{let s={"0a78a473c3795b71db7eccee569b5b5f4bd5c595":()=>Promise.resolve().then(r.bind(r,283)).then(e=>e.createSubscription)};async function l(e,...t){return(await s[e]()).apply(null,t)}e.exports={"0a78a473c3795b71db7eccee569b5b5f4bd5c595":l.bind(null,"0a78a473c3795b71db7eccee569b5b5f4bd5c595")}},7881:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},4793:(e,t,r)=>{Promise.resolve().then(r.bind(r,1253))},4571:()=>{},3458:(e,t,r)=>{Promise.resolve().then(r.bind(r,7676))},1253:(e,t,r)=>{"use strict";r.d(t,{default:()=>h});var s=r(326),l=r(7577),a=r(434);r(5424);var n=(0,r(6242).$)("0a78a473c3795b71db7eccee569b5b5f4bd5c595");let i="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function o({label:e,children:t}){return(0,s.jsxs)("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400",children:e}),t]})}let c={tool_id:"",plan_name:"",monthly_cost:0,currency:"USD",payment_frequency:"monthly",renewal_date:"",billing_owner:""};function d({tools:e,onClose:t}){let[r,a]=(0,l.useState)(c),[d,x]=(0,l.useState)(!1),[u,p]=(0,l.useState)(null),h=(e,t)=>a(r=>({...r,[e]:t})),m=async e=>{if(e.preventDefault(),!r.tool_id)return;x(!0),p(null);let s=await n(r);x(!1),s.error?p(s.error):t()};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-md mx-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Add Subscription"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),(0,s.jsxs)("form",{onSubmit:m,className:"px-6 py-5 space-y-4",children:[u&&s.jsx("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:u}),s.jsx(o,{label:"Tool *",children:(0,s.jsxs)("select",{value:r.tool_id,onChange:e=>h("tool_id",e.target.value),required:!0,className:i,children:[s.jsx("option",{value:"",children:"Select a tool..."}),e.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(o,{label:"Plan Name",children:s.jsx("input",{type:"text",value:r.plan_name,onChange:e=>h("plan_name",e.target.value),placeholder:"e.g. Pro",className:i})}),s.jsx(o,{label:"Frequency",children:(0,s.jsxs)("select",{value:r.payment_frequency,onChange:e=>h("payment_frequency",e.target.value),className:i,children:[s.jsx("option",{value:"monthly",children:"Monthly"}),s.jsx("option",{value:"quarterly",children:"Quarterly"}),s.jsx("option",{value:"annual",children:"Annual"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(o,{label:"Monthly Cost *",children:s.jsx("input",{type:"number",step:"0.01",min:"0",value:r.monthly_cost,onChange:e=>h("monthly_cost",parseFloat(e.target.value)||0),required:!0,className:i})}),s.jsx(o,{label:"Currency",children:(0,s.jsxs)("select",{value:r.currency,onChange:e=>h("currency",e.target.value),className:i,children:[s.jsx("option",{value:"USD",children:"USD — US Dollar"}),s.jsx("option",{value:"PHP",children:"PHP — Philippine Peso"}),s.jsx("option",{value:"EUR",children:"EUR — Euro"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(o,{label:"Renewal Date",children:s.jsx("input",{type:"date",value:r.renewal_date,onChange:e=>h("renewal_date",e.target.value),className:i})}),s.jsx(o,{label:"Billing Owner",children:s.jsx("input",{type:"text",value:r.billing_owner,onChange:e=>h("billing_owner",e.target.value),placeholder:"e.g. Finance",className:i})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:d?"Saving...":"Add Subscription"})]})]})]})})}let x={monthly:"bg-blue-900 text-blue-300",quarterly:"bg-purple-900 text-purple-300",annual:"bg-indigo-900 text-indigo-300"};function u(e){return Math.ceil((new Date(e).getTime()-new Date().getTime())/864e5)}function p({date:e}){if(!e)return s.jsx("span",{className:"text-gray-500",children:"—"});let t=u(e),r=new Date(e).toLocaleDateString();return t<0?(0,s.jsxs)("span",{className:"text-red-400 font-medium",children:[r," (overdue)"]}):t<=14?(0,s.jsxs)("span",{className:"text-red-400 font-medium",children:[r," (",t,"d)"]}):t<=30?(0,s.jsxs)("span",{className:"text-yellow-400 font-medium",children:[r," (",t,"d)"]}):s.jsx("span",{className:"text-gray-300",children:r})}function h({subscriptions:e,tools:t}){let[r,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(""),c=e.filter(e=>!i||e.payment_frequency===i),h=e.reduce((e,t)=>("monthly"===t.payment_frequency||"quarterly"===t.payment_frequency||t.payment_frequency,e+Number(t.monthly_cost)),0),m=e.filter(e=>{if(!e.renewal_date)return!1;let t=u(e.renewal_date);return t>=0&&t<=30}).length;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Billing"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[e.length," subscriptions"]})]}),s.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium rounded-lg transition-colors",children:"+ Add Subscription"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total / Month"}),(0,s.jsxs)("p",{className:"mt-1.5 text-xl font-bold text-white",children:["USD ",h.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Renewing in 30 days"}),s.jsx("p",{className:`mt-1.5 text-xl font-bold ${m>0?"text-yellow-400":"text-white"}`,children:m})]}),(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Active Subscriptions"}),s.jsx("p",{className:"mt-1.5 text-xl font-bold text-white",children:e.length})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"",children:"All Frequencies"}),s.jsx("option",{value:"monthly",children:"Monthly"}),s.jsx("option",{value:"quarterly",children:"Quarterly"}),s.jsx("option",{value:"annual",children:"Annual"})]}),i&&s.jsx("button",{onClick:()=>o(""),className:"text-sm text-gray-400 hover:text-white px-3 py-2 transition-colors",children:"Clear"})]}),s.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-gray-800",children:["Tool","Plan","Monthly Cost","Frequency","Renewal Date","Billing Owner"].map(e=>s.jsx("th",{className:"text-left px-5 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:0===c.length?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-5 py-10 text-center text-gray-500",children:"No subscriptions found"})}):c.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[s.jsx("td",{className:"px-5 py-4",children:e.tools?(0,s.jsxs)("div",{children:[s.jsx(a.default,{href:`/tools/${e.tools.id}`,className:"font-medium text-indigo-400 hover:text-indigo-300",children:e.tools.name}),e.tools.category&&s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e.tools.category})]}):"—"}),s.jsx("td",{className:"px-5 py-4 text-gray-300",children:e.plan_name??"—"}),(0,s.jsxs)("td",{className:"px-5 py-4 font-medium text-white",children:[e.currency," ",Number(e.monthly_cost).toFixed(2)]}),s.jsx("td",{className:"px-5 py-4",children:s.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs font-medium capitalize ${x[e.payment_frequency]}`,children:e.payment_frequency})}),s.jsx("td",{className:"px-5 py-4",children:s.jsx(p,{date:e.renewal_date})}),s.jsx("td",{className:"px-5 py-4 text-gray-400",children:e.billing_owner??"—"})]},e.id))})]})}),r&&s.jsx(d,{tools:t,onClose:()=>n(!1)})]})}},7676:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(326),l=r(434),a=r(5047),n=r(9701);let i=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function o(){let e=(0,a.usePathname)(),t=(0,a.useRouter)(),r=(0,n.e)(),o=async()=>{await r.auth.signOut(),t.push("/login")};return(0,s.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,s.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),s.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),s.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:i.map(({href:t,label:r,icon:a})=>{let n=e===t||e.startsWith(`${t}/`);return(0,s.jsxs)(l.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${n?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[s.jsx("span",{className:"text-base leading-none",children:a}),r]},t)})}),s.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,s.jsxs)("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[s.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,r)=>{"use strict";r.d(t,{e:()=>l});var s=r(861);let l=()=>(0,s.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},283:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createSubscription:()=>n});var s=r(7745);r(6461);var l=r(1870),a=r(207);async function n(e){let t=await (0,l.e)(),{error:r}=await t.from("billing_subscriptions").insert({tool_id:e.tool_id,plan_name:e.plan_name||null,monthly_cost:e.monthly_cost,currency:e.currency||"USD",payment_frequency:e.payment_frequency,renewal_date:e.renewal_date||null,billing_owner:e.billing_owner||null});return r?{error:r.message}:((0,a.revalidatePath)("/billing"),{error:null})}(0,r(5723).h)([n]),(0,s.j)("0a78a473c3795b71db7eccee569b5b5f4bd5c595",n)},5726:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9510),l=r(5655);let a=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\app\(app)\billing\BillingClient.tsx#default`);async function n(){let e=await (0,l.e)(),[{data:t},{data:r}]=await Promise.all([e.from("billing_subscriptions").select("*, tools(id, name, category)").order("renewal_date",{ascending:!0,nullsFirst:!1}),e.from("tools").select("id, name").eq("billing_type","subscription").eq("status","active").order("name")]);return s.jsx(a,{subscriptions:t??[],tools:r??[]})}},8927:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(9510),l=r(8585),a=r(5655);let n=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function i({children:e}){let t=await (0,a.e)(),{data:{user:r}}=await t.auth.getUser();return r||(0,l.redirect)("/login"),(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[s.jsx(n,{}),s.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>l});var s=r(9510);r(5023);let l={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function a({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},1870:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var s=r(6389),l=r(3973);let a=async()=>{let e=await (0,l.cookies)();return(0,s.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})}},5655:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var s=r(2728),l=r(1615);let a=async()=>{let e=await (0,l.cookies)();return(0,s.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,471,637,861,512,799],()=>r(3634));module.exports=s})();