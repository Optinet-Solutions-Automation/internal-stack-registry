(()=>{var e={};e.id=111,e.ids=[111],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4138:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d}),r(6160),r(8927),r(5866),r(2029);var a=r(3191),s=r(8716),n=r(7922),l=r.n(n),i=r(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let d=["",{children:["(app)",{children:["purchases",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6160)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\purchases\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\purchases\\page.tsx"],x="/(app)/purchases/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(app)/purchases/page",pathname:"/purchases",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1036:(e,t,r)=>{let a={"80a0f868f3c753a125fda6c68adcb3b87480d778":()=>Promise.resolve().then(r.bind(r,842)).then(e=>e.deletePurchase),"8d8e7450d700d5cfab067b63ffd42da65cf9efae":()=>Promise.resolve().then(r.bind(r,842)).then(e=>e.updatePurchase),eba7ed26fe48ee0475d083b5a5958b88aa53cd80:()=>Promise.resolve().then(r.bind(r,842)).then(e=>e.createPurchase)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"80a0f868f3c753a125fda6c68adcb3b87480d778":s.bind(null,"80a0f868f3c753a125fda6c68adcb3b87480d778"),"8d8e7450d700d5cfab067b63ffd42da65cf9efae":s.bind(null,"8d8e7450d700d5cfab067b63ffd42da65cf9efae"),eba7ed26fe48ee0475d083b5a5958b88aa53cd80:s.bind(null,"eba7ed26fe48ee0475d083b5a5958b88aa53cd80")}},7881:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3263:(e,t,r)=>{Promise.resolve().then(r.bind(r,5660))},4571:()=>{},3458:(e,t,r)=>{Promise.resolve().then(r.bind(r,7676))},5660:(e,t,r)=>{"use strict";r.d(t,{default:()=>N});var a=r(326),s=r(7577),n=r(9701);r(5424);var l=r(6242),i=(0,l.$)("80a0f868f3c753a125fda6c68adcb3b87480d778"),c=(0,l.$)("eba7ed26fe48ee0475d083b5a5958b88aa53cd80"),d=(0,l.$)("8d8e7450d700d5cfab067b63ffd42da65cf9efae");let o="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function x({label:e,children:t}){return(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400",children:e}),t]})}async function u(e){return new Promise((t,r)=>{let a=new Image,s=URL.createObjectURL(e);a.onload=()=>{URL.revokeObjectURL(s);let{width:e,height:n}=a;(e>1200||n>1200)&&(e>n?(n=Math.round(1200*n/e),e=1200):(e=Math.round(1200*e/n),n=1200));let l=document.createElement("canvas");l.width=e,l.height=n,l.getContext("2d").drawImage(a,0,0,e,n),l.toBlob(e=>e?t(e):r(Error("Compression failed")),"image/jpeg",.75)},a.onerror=r,a.src=s})}async function p(e,t){let r=(0,n.e)(),a=await u(e),s=`${t}/${Date.now()}.jpg`,{error:l}=await r.storage.from("receipts").upload(s,a,{contentType:"image/jpeg"});if(l)throw Error(l.message);let{data:i}=r.storage.from("receipts").getPublicUrl(s);return i.publicUrl}let h={name:"",purchase_date:new Date().toISOString().slice(0,10),amount:0,currency:"USD",description:"",vendor:"",category:"",assigned_to:"",warranty_id:"",warranty_expires:""};function g({onClose:e}){let[t,r]=(0,s.useState)(h),[n,l]=(0,s.useState)(null),[i,d]=(0,s.useState)(null),[u,g]=(0,s.useState)(!1),[m,y]=(0,s.useState)(null),b=(0,s.useRef)(null),j=(0,s.useRef)(null),f=(e,t)=>r(r=>({...r,[e]:t})),v=async r=>{if(r.preventDefault(),t.name.trim()&&t.purchase_date){g(!0),y(null);try{let r=null,a=null;n&&(r=await p(n,"receipts")),i&&(a=await p(i,"warranty"));let s=await c({...t,receipt_url:r,warranty_receipt_url:a});if(s.error){y(s.error);return}e()}catch(e){y(e.message??"Upload failed")}finally{g(!1)}}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:"Add Purchase"}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:v,className:"px-6 py-5 space-y-4",children:[m&&a.jsx("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:m}),a.jsx(x,{label:"Item Name *",children:a.jsx("input",{type:"text",value:t.name,onChange:e=>f("name",e.target.value),required:!0,placeholder:"e.g. MacBook Pro 14",className:o})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(x,{label:"Purchase Date *",children:a.jsx("input",{type:"date",value:t.purchase_date,onChange:e=>f("purchase_date",e.target.value),required:!0,className:o})}),a.jsx(x,{label:"Category",children:a.jsx("input",{type:"text",value:t.category??"",onChange:e=>f("category",e.target.value),placeholder:"e.g. Hardware",className:o})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(x,{label:"Amount *",children:a.jsx("input",{type:"number",step:"0.01",min:"0",required:!0,value:t.amount,onChange:e=>f("amount",parseFloat(e.target.value)||0),className:o})}),a.jsx(x,{label:"Currency",children:(0,a.jsxs)("select",{value:t.currency,onChange:e=>f("currency",e.target.value),className:o,children:[a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"PHP",children:"PHP"}),a.jsx("option",{value:"EUR",children:"EUR"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(x,{label:"Vendor",children:a.jsx("input",{type:"text",value:t.vendor??"",onChange:e=>f("vendor",e.target.value),placeholder:"e.g. Apple",className:o})}),a.jsx(x,{label:"Assigned To",children:a.jsx("input",{type:"text",value:t.assigned_to??"",onChange:e=>f("assigned_to",e.target.value),placeholder:"e.g. Chris",className:o})})]}),a.jsx(x,{label:"Description",children:a.jsx("textarea",{value:t.description??"",onChange:e=>f("description",e.target.value),rows:2,placeholder:"Additional notes",className:`${o} resize-none`})}),(0,a.jsxs)("div",{className:"border-t border-gray-800 pt-4 space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Warranty"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(x,{label:"Warranty ID",children:a.jsx("input",{type:"text",value:t.warranty_id??"",onChange:e=>f("warranty_id",e.target.value),placeholder:"e.g. WR-123456",className:o})}),a.jsx(x,{label:"Warranty Expires",children:a.jsx("input",{type:"date",value:t.warranty_expires??"",onChange:e=>f("warranty_expires",e.target.value),className:o})})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-800 pt-4 space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Receipts — images compressed automatically"}),a.jsx(x,{label:"Purchase Receipt (photo/scan)",children:(0,a.jsxs)("div",{onClick:()=>b.current?.click(),className:"border border-dashed border-gray-700 rounded-lg px-4 py-3 cursor-pointer hover:border-indigo-500 transition-colors text-center",children:[n?(0,a.jsxs)("p",{className:"text-sm text-indigo-300",children:[n.name," (",(n.size/1024).toFixed(0)," KB)"]}):a.jsx("p",{className:"text-sm text-gray-500",children:"Click to upload receipt image"}),a.jsx("input",{ref:b,type:"file",accept:"image/*",className:"hidden",onChange:e=>l(e.target.files?.[0]??null)})]})}),a.jsx(x,{label:"Warranty Receipt (photo/scan)",children:(0,a.jsxs)("div",{onClick:()=>j.current?.click(),className:"border border-dashed border-gray-700 rounded-lg px-4 py-3 cursor-pointer hover:border-indigo-500 transition-colors text-center",children:[i?(0,a.jsxs)("p",{className:"text-sm text-indigo-300",children:[i.name," (",(i.size/1024).toFixed(0)," KB)"]}):a.jsx("p",{className:"text-sm text-gray-500",children:"Click to upload warranty image"}),a.jsx("input",{ref:j,type:"file",accept:"image/*",className:"hidden",onChange:e=>d(e.target.files?.[0]??null)})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:u?"Uploading...":"Add Purchase"})]})]})]})})}let m="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function y({label:e,children:t}){return(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400",children:e}),t]})}async function b(e){return new Promise((t,r)=>{let a=new Image,s=URL.createObjectURL(e);a.onload=()=>{URL.revokeObjectURL(s);let{width:e,height:n}=a;(e>1200||n>1200)&&(e>n?(n=Math.round(1200*n/e),e=1200):(e=Math.round(1200*e/n),n=1200));let l=document.createElement("canvas");l.width=e,l.height=n,l.getContext("2d").drawImage(a,0,0,e,n),l.toBlob(e=>e?t(e):r(Error("Compression failed")),"image/jpeg",.75)},a.onerror=r,a.src=s})}async function j(e,t){let r=(0,n.e)(),a=await b(e),s=`${t}/${Date.now()}.jpg`,{error:l}=await r.storage.from("receipts").upload(s,a,{contentType:"image/jpeg"});if(l)throw Error(l.message);let{data:i}=r.storage.from("receipts").getPublicUrl(s);return i.publicUrl}function f({purchase:e,onClose:t}){let[r,n]=(0,s.useState)({name:e.name,purchase_date:e.purchase_date,amount:Number(e.amount),currency:e.currency,description:e.description??"",vendor:e.vendor??"",category:e.category??"",assigned_to:e.assigned_to??"",warranty_id:e.warranty_id??"",warranty_expires:e.warranty_expires??""}),[l,i]=(0,s.useState)(null),[c,o]=(0,s.useState)(null),[x,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),g=(0,s.useRef)(null),b=(0,s.useRef)(null),f=(e,t)=>n(r=>({...r,[e]:t})),v=async a=>{if(a.preventDefault(),r.name.trim()&&r.purchase_date){u(!0),h(null);try{let a=l?await j(l,"receipts"):e.receipt_url,s=c?await j(c,"warranty"):e.warranty_receipt_url,n=await d(e.id,{...r,receipt_url:a,warranty_receipt_url:s});if(n.error){h(n.error);return}t()}catch(e){h(e.message??"Upload failed")}finally{u(!1)}}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:"Edit Purchase"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:v,className:"px-6 py-5 space-y-4",children:[p&&a.jsx("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:p}),a.jsx(y,{label:"Item Name *",children:a.jsx("input",{type:"text",value:r.name,onChange:e=>f("name",e.target.value),required:!0,className:m})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(y,{label:"Purchase Date *",children:a.jsx("input",{type:"date",value:r.purchase_date,onChange:e=>f("purchase_date",e.target.value),required:!0,className:m})}),a.jsx(y,{label:"Category",children:a.jsx("input",{type:"text",value:r.category??"",onChange:e=>f("category",e.target.value),placeholder:"e.g. Hardware",className:m})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(y,{label:"Amount *",children:a.jsx("input",{type:"number",step:"0.01",min:"0",required:!0,value:r.amount,onChange:e=>f("amount",parseFloat(e.target.value)||0),className:m})}),a.jsx(y,{label:"Currency",children:(0,a.jsxs)("select",{value:r.currency,onChange:e=>f("currency",e.target.value),className:m,children:[a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"PHP",children:"PHP"}),a.jsx("option",{value:"EUR",children:"EUR"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(y,{label:"Vendor",children:a.jsx("input",{type:"text",value:r.vendor??"",onChange:e=>f("vendor",e.target.value),placeholder:"e.g. Apple",className:m})}),a.jsx(y,{label:"Assigned To",children:a.jsx("input",{type:"text",value:r.assigned_to??"",onChange:e=>f("assigned_to",e.target.value),placeholder:"e.g. Chris",className:m})})]}),a.jsx(y,{label:"Description",children:a.jsx("textarea",{value:r.description??"",onChange:e=>f("description",e.target.value),rows:2,placeholder:"Additional notes",className:`${m} resize-none`})}),(0,a.jsxs)("div",{className:"border-t border-gray-800 pt-4 space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Warranty"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(y,{label:"Warranty ID",children:a.jsx("input",{type:"text",value:r.warranty_id??"",onChange:e=>f("warranty_id",e.target.value),placeholder:"e.g. WR-123456",className:m})}),a.jsx(y,{label:"Warranty Expires",children:a.jsx("input",{type:"date",value:r.warranty_expires??"",onChange:e=>f("warranty_expires",e.target.value),className:m})})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-800 pt-4 space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Receipts — upload new to replace existing"}),a.jsx(y,{label:"Purchase Receipt",children:(0,a.jsxs)("div",{onClick:()=>g.current?.click(),className:"border border-dashed border-gray-700 rounded-lg px-4 py-3 cursor-pointer hover:border-indigo-500 transition-colors text-center",children:[l?(0,a.jsxs)("p",{className:"text-sm text-indigo-300",children:[l.name," (",(l.size/1024).toFixed(0)," KB)"]}):e.receipt_url?a.jsx("p",{className:"text-sm text-green-400",children:"Current receipt on file — click to replace"}):a.jsx("p",{className:"text-sm text-gray-500",children:"Click to upload receipt image"}),a.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:e=>i(e.target.files?.[0]??null)})]})}),a.jsx(y,{label:"Warranty Receipt",children:(0,a.jsxs)("div",{onClick:()=>b.current?.click(),className:"border border-dashed border-gray-700 rounded-lg px-4 py-3 cursor-pointer hover:border-indigo-500 transition-colors text-center",children:[c?(0,a.jsxs)("p",{className:"text-sm text-indigo-300",children:[c.name," (",(c.size/1024).toFixed(0)," KB)"]}):e.warranty_receipt_url?a.jsx("p",{className:"text-sm text-green-400",children:"Current receipt on file — click to replace"}):a.jsx("p",{className:"text-sm text-gray-500",children:"Click to upload warranty image"}),a.jsx("input",{ref:b,type:"file",accept:"image/*",className:"hidden",onChange:e=>o(e.target.files?.[0]??null)})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:x?"Saving...":"Save Changes"})]})]})]})})}function v(e){return e?Math.ceil((new Date(e).getTime()-new Date().getTime())/864e5):null}function w({expires:e}){let t=v(e);return null===t?a.jsx("span",{className:"text-gray-500",children:"—"}):t<0?a.jsx("span",{className:"text-red-400 text-xs font-medium",children:"Expired"}):t<=90?(0,a.jsxs)("span",{className:"text-yellow-400 text-xs font-medium",children:[t,"d left"]}):a.jsx("span",{className:"text-green-400 text-xs font-medium",children:new Date(e).toLocaleDateString()})}function N({purchases:e}){let[t,r]=(0,s.useState)(!1),[n,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(""),[o,x]=(0,s.useState)(null),[u,p]=(0,s.useState)(null),[h,m]=(0,s.useState)(!1),y=[...new Set(e.map(e=>e.category).filter(Boolean))],b=e.filter(e=>!c||e.category===c),j=e.reduce((e,t)=>e+Number(t.amount),0),N=e.filter(e=>null!==v(e.warranty_expires)&&0>v(e.warranty_expires)).length,_=async e=>{m(!0),await i(e),p(null),m(!1)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Purchases"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[e.length," one-time purchases recorded"]})]}),a.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium rounded-lg transition-colors",children:"+ Add Purchase"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total Spent"}),(0,a.jsxs)("p",{className:"mt-1.5 text-xl font-bold text-white",children:["USD ",j.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Expired Warranties"}),a.jsx("p",{className:`mt-1.5 text-xl font-bold ${N>0?"text-red-400":"text-white"}`,children:N})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Items"}),a.jsx("p",{className:"mt-1.5 text-xl font-bold text-white",children:e.length})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"All Categories"}),y.map(e=>a.jsx("option",{value:e,children:e},e))]}),c&&a.jsx("button",{onClick:()=>d(""),className:"text-sm text-gray-400 hover:text-white px-3 py-2 transition-colors",children:"Clear"})]}),a.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsx("tr",{className:"border-b border-gray-800",children:["Item","Date","Amount","Vendor","Assigned To","Warranty ID","Warranty Exp.","Receipts",""].map((e,t)=>a.jsx("th",{className:"text-left px-4 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},t))})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:0===b.length?a.jsx("tr",{children:a.jsx("td",{colSpan:9,className:"px-4 py-10 text-center text-gray-500",children:"No purchases found"})}):b.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[(0,a.jsxs)("td",{className:"px-4 py-4",children:[a.jsx("p",{className:"font-medium text-white",children:e.name}),e.category&&a.jsx("p",{className:"text-xs text-gray-500",children:e.category}),e.description&&a.jsx("p",{className:"text-xs text-gray-600 mt-0.5 max-w-xs truncate",children:e.description})]}),a.jsx("td",{className:"px-4 py-4 text-gray-300 whitespace-nowrap",children:new Date(e.purchase_date).toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-4 py-4 font-semibold text-white whitespace-nowrap",children:[e.currency," ",Number(e.amount).toFixed(2)]}),a.jsx("td",{className:"px-4 py-4 text-gray-400",children:e.vendor??"—"}),a.jsx("td",{className:"px-4 py-4 text-gray-400",children:e.assigned_to??"—"}),a.jsx("td",{className:"px-4 py-4 text-gray-400 font-mono text-xs",children:e.warranty_id??"—"}),a.jsx("td",{className:"px-4 py-4",children:a.jsx(w,{expires:e.warranty_expires})}),a.jsx("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[e.receipt_url&&a.jsx("button",{onClick:()=>x(e.receipt_url),className:"text-xs text-indigo-400 hover:text-indigo-300 underline transition-colors",children:"Receipt"}),e.warranty_receipt_url&&a.jsx("button",{onClick:()=>x(e.warranty_receipt_url),className:"text-xs text-indigo-400 hover:text-indigo-300 underline transition-colors",children:"Warranty"}),!e.receipt_url&&!e.warranty_receipt_url&&a.jsx("span",{className:"text-gray-600 text-xs",children:"—"})]})}),a.jsx("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 whitespace-nowrap",children:[a.jsx("button",{onClick:()=>l(e),className:"text-xs text-gray-400 hover:text-white transition-colors",children:"Edit"}),u===e.id?(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[a.jsx("button",{onClick:()=>_(e.id),disabled:h,className:"text-xs text-red-400 hover:text-red-300 transition-colors disabled:opacity-50",children:h?"...":"Confirm"}),a.jsx("button",{onClick:()=>p(null),className:"text-xs text-gray-500 hover:text-white transition-colors",children:"Cancel"})]}):a.jsx("button",{onClick:()=>p(e.id),className:"text-xs text-gray-600 hover:text-red-400 transition-colors",children:"Delete"})]})})]},e.id))})]})}),o&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>x(null),children:(0,a.jsxs)("div",{className:"relative max-w-3xl max-h-[90vh] mx-4",onClick:e=>e.stopPropagation(),children:[a.jsx("button",{onClick:()=>x(null),className:"absolute -top-10 right-0 text-white text-2xl hover:text-gray-300",children:"\xd7"}),a.jsx("img",{src:o,alt:"Receipt",className:"rounded-lg max-h-[85vh] object-contain"})]})}),t&&a.jsx(g,{onClose:()=>r(!1)}),n&&a.jsx(f,{purchase:n,onClose:()=>l(null)})]})}},7676:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var a=r(326),s=r(434),n=r(5047),l=r(9701);let i=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function c(){let e=(0,n.usePathname)(),t=(0,n.useRouter)(),r=(0,l.e)(),c=async()=>{await r.auth.signOut(),t.push("/login")};return(0,a.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,a.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),a.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),a.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:i.map(({href:t,label:r,icon:n})=>{let l=e===t||e.startsWith(`${t}/`);return(0,a.jsxs)(s.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${l?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[a.jsx("span",{className:"text-base leading-none",children:n}),r]},t)})}),a.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,a.jsxs)("button",{onClick:c,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[a.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var a=r(861);let s=()=>(0,a.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},8927:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(9510),s=r(8585),n=r(5655);let l=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function i({children:e}){let t=await (0,n.e)(),{data:{user:r}}=await t.auth.getUser();return r||(0,s.redirect)("/login"),(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[a.jsx(l,{}),a.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},842:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createPurchase:()=>l,deletePurchase:()=>d,updatePurchase:()=>i});var a=r(7745);r(6461);var s=r(1870),n=r(207);async function l(e){let t=await (0,s.e)(),{error:r}=await t.from("purchases").insert({name:e.name,purchase_date:e.purchase_date,amount:e.amount,currency:e.currency,description:e.description||null,vendor:e.vendor||null,category:e.category||null,assigned_to:e.assigned_to||null,warranty_id:e.warranty_id||null,warranty_expires:e.warranty_expires||null,receipt_url:e.receipt_url||null,warranty_receipt_url:e.warranty_receipt_url||null});return r?{error:r.message}:((0,n.revalidatePath)("/purchases"),{error:null})}async function i(e,t){let r=await (0,s.e)(),{error:a}=await r.from("purchases").update({name:t.name,purchase_date:t.purchase_date,amount:t.amount,currency:t.currency,description:t.description||null,vendor:t.vendor||null,category:t.category||null,assigned_to:t.assigned_to||null,warranty_id:t.warranty_id||null,warranty_expires:t.warranty_expires||null,receipt_url:t.receipt_url||null,warranty_receipt_url:t.warranty_receipt_url||null}).eq("id",e);return a?{error:a.message}:((0,n.revalidatePath)("/purchases"),{error:null})}function c(e){let t="/object/public/receipts/",r=e.indexOf(t);return -1===r?null:e.slice(r+t.length)}async function d(e){let t=await (0,s.e)(),{data:r}=await t.from("purchases").select("receipt_url, warranty_receipt_url").eq("id",e).single(),{error:a}=await t.from("purchases").delete().eq("id",e);if(a)return{error:a.message};let l=[];if(r?.receipt_url){let e=c(r.receipt_url);e&&l.push(e)}if(r?.warranty_receipt_url){let e=c(r.warranty_receipt_url);e&&l.push(e)}return l.length>0&&await t.storage.from("receipts").remove(l),(0,n.revalidatePath)("/purchases"),{error:null}}(0,r(5723).h)([l,i,d]),(0,a.j)("eba7ed26fe48ee0475d083b5a5958b88aa53cd80",l),(0,a.j)("8d8e7450d700d5cfab067b63ffd42da65cf9efae",i),(0,a.j)("80a0f868f3c753a125fda6c68adcb3b87480d778",d)},6160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(9510),s=r(5655);let n=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\app\(app)\purchases\PurchasesClient.tsx#default`);async function l(){let e=await (0,s.e)(),{data:t}=await e.from("purchases").select("*").order("purchase_date",{ascending:!1});return a.jsx(n,{purchases:t??[]})}},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>s});var a=r(9510);r(5023);let s={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function n({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},1870:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var a=r(6389),s=r(3973);let n=async()=>{let e=await (0,s.cookies)();return(0,a.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:r,options:a})=>e.set(t,r,a))}catch{}}}})}},5655:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var a=r(2728),s=r(1615);let n=async()=>{let e=await (0,s.cookies)();return(0,a.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:r,options:a})=>e.set(t,r,a))}catch{}}}})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,471,637,861,512,799],()=>r(4138));module.exports=a})();