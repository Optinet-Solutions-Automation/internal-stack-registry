(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{2207:function(e,t,r){Promise.resolve().then(r.bind(r,1410))},2119:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return s}});let a=r(3079);function s(e){let{createServerReference:t}=r(6671);return t(e,a.callServer)}},1410:function(e,t,r){"use strict";r.d(t,{default:function(){return w}});var a=r(7437),s=r(2265),l=r(8933);r(3079);var n=r(2119),i=(0,n.$)("80a0f868f3c753a125fda6c68adcb3b87480d778"),c=(0,n.$)("eba7ed26fe48ee0475d083b5a5958b88aa53cd80"),d=(0,n.$)("8d8e7450d700d5cfab067b63ffd42da65cf9efae");let o="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function x(e){let{label:t,children:r}=e;return(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-400",children:t}),r]})}async function u(e){return new Promise((t,r)=>{let a=new Image,s=URL.createObjectURL(e);a.onload=()=>{URL.revokeObjectURL(s);let{width:e,height:l}=a;(e>1200||l>1200)&&(e>l?(l=Math.round(1200*l/e),e=1200):(e=Math.round(1200*e/l),l=1200));let n=document.createElement("canvas");n.width=e,n.height=l,n.getContext("2d").drawImage(a,0,0,e,l),n.toBlob(e=>e?t(e):r(Error("Compression failed")),"image/jpeg",.75)},a.onerror=r,a.src=s})}async function p(e,t){let r=(0,l.e)(),a=await u(e),s="".concat(t,"/").concat(Date.now(),".").concat("jpg"),{error:n}=await r.storage.from("receipts").upload(s,a,{contentType:"image/jpeg"});if(n)throw Error(n.message);let{data:i}=r.storage.from("receipts").getPublicUrl(s);return i.publicUrl}let g={name:"",purchase_date:new Date().toISOString().slice(0,10),amount:0,currency:"USD",description:"",vendor:"",category:"",assigned_to:"",warranty_id:"",warranty_expires:""};function m(e){var t,r,l,n,i,d;let{onClose:u}=e,[m,h]=(0,s.useState)(g),[y,v]=(0,s.useState)(null),[j,b]=(0,s.useState)(null),[N,f]=(0,s.useState)(!1),[w,C]=(0,s.useState)(null),_=(0,s.useRef)(null),k=(0,s.useRef)(null),S=(e,t)=>h(r=>({...r,[e]:t})),R=async e=>{if(e.preventDefault(),m.name.trim()&&m.purchase_date){f(!0),C(null);try{let e=null,t=null;y&&(e=await p(y,"receipts")),j&&(t=await p(j,"warranty"));let r=await c({...m,receipt_url:e,warranty_receipt_url:t});if(r.error){C(r.error);return}u()}catch(e){var t;C(null!==(t=e.message)&&void 0!==t?t:"Upload failed")}finally{f(!1)}}};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Add Purchase"}),(0,a.jsx)("button",{onClick:u,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:R,className:"px-6 py-5 space-y-4",children:[w&&(0,a.jsx)("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:w}),(0,a.jsx)(x,{label:"Item Name *",children:(0,a.jsx)("input",{type:"text",value:m.name,onChange:e=>S("name",e.target.value),required:!0,placeholder:"e.g. MacBook Pro 14",className:o})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(x,{label:"Purchase Date *",children:(0,a.jsx)("input",{type:"date",value:m.purchase_date,onChange:e=>S("purchase_date",e.target.value),required:!0,className:o})}),(0,a.jsx)(x,{label:"Category",children:(0,a.jsx)("input",{type:"text",value:null!==(t=m.category)&&void 0!==t?t:"",onChange:e=>S("category",e.target.value),placeholder:"e.g. Hardware",className:o})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(x,{label:"Amount *",children:(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",required:!0,value:m.amount,onChange:e=>S("amount",parseFloat(e.target.value)||0),className:o})}),(0,a.jsx)(x,{label:"Currency",children:(0,a.jsxs)("select",{value:m.currency,onChange:e=>S("currency",e.target.value),className:o,children:[(0,a.jsx)("option",{value:"USD",children:"USD"}),(0,a.jsx)("option",{value:"PHP",children:"PHP"}),(0,a.jsx)("option",{value:"EUR",children:"EUR"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(x,{label:"Vendor",children:(0,a.jsx)("input",{type:"text",value:null!==(r=m.vendor)&&void 0!==r?r:"",onChange:e=>S("vendor",e.target.value),placeholder:"e.g. Apple",className:o})}),(0,a.jsx)(x,{label:"Assigned To",children:(0,a.jsx)("input",{type:"text",value:null!==(l=m.assigned_to)&&void 0!==l?l:"",onChange:e=>S("assigned_to",e.target.value),placeholder:"e.g. Chris",className:o})})]}),(0,a.jsx)(x,{label:"Description",children:(0,a.jsx)("textarea",{value:null!==(n=m.description)&&void 0!==n?n:"",onChange:e=>S("description",e.target.value),rows:2,placeholder:"Additional notes",className:"".concat(o," resize-none")})}),(0,a.jsxs)("div",{className:"border-t border-gray-800 pt-4 space-y-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Warranty"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(x,{label:"Warranty ID",children:(0,a.jsx)("input",{type:"text",value:null!==(i=m.warranty_id)&&void 0!==i?i:"",onChange:e=>S("warranty_id",e.target.value),placeholder:"e.g. WR-123456",className:o})}),(0,a.jsx)(x,{label:"Warranty Expires",children:(0,a.jsx)("input",{type:"date",value:null!==(d=m.warranty_expires)&&void 0!==d?d:"",onChange:e=>S("warranty_expires",e.target.value),className:o})})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-800 pt-4 space-y-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Receipts — images compressed automatically"}),(0,a.jsx)(x,{label:"Purchase Receipt (photo/scan)",children:(0,a.jsxs)("div",{onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},className:"border border-dashed border-gray-700 rounded-lg px-4 py-3 cursor-pointer hover:border-indigo-500 transition-colors text-center",children:[y?(0,a.jsxs)("p",{className:"text-sm text-indigo-300",children:[y.name," (",(y.size/1024).toFixed(0)," KB)"]}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Click to upload receipt image"}),(0,a.jsx)("input",{ref:_,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t,r;return v(null!==(r=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==r?r:null)}})]})}),(0,a.jsx)(x,{label:"Warranty Receipt (photo/scan)",children:(0,a.jsxs)("div",{onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.click()},className:"border border-dashed border-gray-700 rounded-lg px-4 py-3 cursor-pointer hover:border-indigo-500 transition-colors text-center",children:[j?(0,a.jsxs)("p",{className:"text-sm text-indigo-300",children:[j.name," (",(j.size/1024).toFixed(0)," KB)"]}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Click to upload warranty image"}),(0,a.jsx)("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t,r;return b(null!==(r=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==r?r:null)}})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:u,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:N?"Uploading...":"Add Purchase"})]})]})]})})}let h="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function y(e){let{label:t,children:r}=e;return(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-400",children:t}),r]})}async function v(e){return new Promise((t,r)=>{let a=new Image,s=URL.createObjectURL(e);a.onload=()=>{URL.revokeObjectURL(s);let{width:e,height:l}=a;(e>1200||l>1200)&&(e>l?(l=Math.round(1200*l/e),e=1200):(e=Math.round(1200*e/l),l=1200));let n=document.createElement("canvas");n.width=e,n.height=l,n.getContext("2d").drawImage(a,0,0,e,l),n.toBlob(e=>e?t(e):r(Error("Compression failed")),"image/jpeg",.75)},a.onerror=r,a.src=s})}async function j(e,t){let r=(0,l.e)(),a=await v(e),s="".concat(t,"/").concat(Date.now(),".jpg"),{error:n}=await r.storage.from("receipts").upload(s,a,{contentType:"image/jpeg"});if(n)throw Error(n.message);let{data:i}=r.storage.from("receipts").getPublicUrl(s);return i.publicUrl}function b(e){var t,r,l,n,i,c,o,x,u,p,g,m;let{purchase:v,onClose:b}=e,[N,f]=(0,s.useState)({name:v.name,purchase_date:v.purchase_date,amount:Number(v.amount),currency:v.currency,description:null!==(t=v.description)&&void 0!==t?t:"",vendor:null!==(r=v.vendor)&&void 0!==r?r:"",category:null!==(l=v.category)&&void 0!==l?l:"",assigned_to:null!==(n=v.assigned_to)&&void 0!==n?n:"",warranty_id:null!==(i=v.warranty_id)&&void 0!==i?i:"",warranty_expires:null!==(c=v.warranty_expires)&&void 0!==c?c:""}),[w,C]=(0,s.useState)(null),[_,k]=(0,s.useState)(null),[S,R]=(0,s.useState)(!1),[U,D]=(0,s.useState)(null),I=(0,s.useRef)(null),P=(0,s.useRef)(null),E=(e,t)=>f(r=>({...r,[e]:t})),z=async e=>{if(e.preventDefault(),N.name.trim()&&N.purchase_date){R(!0),D(null);try{let e=w?await j(w,"receipts"):v.receipt_url,t=_?await j(_,"warranty"):v.warranty_receipt_url,r=await d(v.id,{...N,receipt_url:e,warranty_receipt_url:t});if(r.error){D(r.error);return}b()}catch(e){var t;D(null!==(t=e.message)&&void 0!==t?t:"Upload failed")}finally{R(!1)}}};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-800",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Edit Purchase"}),(0,a.jsx)("button",{onClick:b,className:"text-gray-500 hover:text-white transition-colors text-xl leading-none",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:z,className:"px-6 py-5 space-y-4",children:[U&&(0,a.jsx)("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-sm rounded-lg px-4 py-3",children:U}),(0,a.jsx)(y,{label:"Item Name *",children:(0,a.jsx)("input",{type:"text",value:N.name,onChange:e=>E("name",e.target.value),required:!0,className:h})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(y,{label:"Purchase Date *",children:(0,a.jsx)("input",{type:"date",value:N.purchase_date,onChange:e=>E("purchase_date",e.target.value),required:!0,className:h})}),(0,a.jsx)(y,{label:"Category",children:(0,a.jsx)("input",{type:"text",value:null!==(o=N.category)&&void 0!==o?o:"",onChange:e=>E("category",e.target.value),placeholder:"e.g. Hardware",className:h})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(y,{label:"Amount *",children:(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",required:!0,value:N.amount,onChange:e=>E("amount",parseFloat(e.target.value)||0),className:h})}),(0,a.jsx)(y,{label:"Currency",children:(0,a.jsxs)("select",{value:N.currency,onChange:e=>E("currency",e.target.value),className:h,children:[(0,a.jsx)("option",{value:"USD",children:"USD"}),(0,a.jsx)("option",{value:"PHP",children:"PHP"}),(0,a.jsx)("option",{value:"EUR",children:"EUR"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(y,{label:"Vendor",children:(0,a.jsx)("input",{type:"text",value:null!==(x=N.vendor)&&void 0!==x?x:"",onChange:e=>E("vendor",e.target.value),placeholder:"e.g. Apple",className:h})}),(0,a.jsx)(y,{label:"Assigned To",children:(0,a.jsx)("input",{type:"text",value:null!==(u=N.assigned_to)&&void 0!==u?u:"",onChange:e=>E("assigned_to",e.target.value),placeholder:"e.g. Chris",className:h})})]}),(0,a.jsx)(y,{label:"Description",children:(0,a.jsx)("textarea",{value:null!==(p=N.description)&&void 0!==p?p:"",onChange:e=>E("description",e.target.value),rows:2,placeholder:"Additional notes",className:"".concat(h," resize-none")})}),(0,a.jsxs)("div",{className:"border-t border-gray-800 pt-4 space-y-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Warranty"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(y,{label:"Warranty ID",children:(0,a.jsx)("input",{type:"text",value:null!==(g=N.warranty_id)&&void 0!==g?g:"",onChange:e=>E("warranty_id",e.target.value),placeholder:"e.g. WR-123456",className:h})}),(0,a.jsx)(y,{label:"Warranty Expires",children:(0,a.jsx)("input",{type:"date",value:null!==(m=N.warranty_expires)&&void 0!==m?m:"",onChange:e=>E("warranty_expires",e.target.value),className:h})})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-800 pt-4 space-y-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Receipts — upload new to replace existing"}),(0,a.jsx)(y,{label:"Purchase Receipt",children:(0,a.jsxs)("div",{onClick:()=>{var e;return null===(e=I.current)||void 0===e?void 0:e.click()},className:"border border-dashed border-gray-700 rounded-lg px-4 py-3 cursor-pointer hover:border-indigo-500 transition-colors text-center",children:[w?(0,a.jsxs)("p",{className:"text-sm text-indigo-300",children:[w.name," (",(w.size/1024).toFixed(0)," KB)"]}):v.receipt_url?(0,a.jsx)("p",{className:"text-sm text-green-400",children:"Current receipt on file — click to replace"}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Click to upload receipt image"}),(0,a.jsx)("input",{ref:I,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t,r;return C(null!==(r=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==r?r:null)}})]})}),(0,a.jsx)(y,{label:"Warranty Receipt",children:(0,a.jsxs)("div",{onClick:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.click()},className:"border border-dashed border-gray-700 rounded-lg px-4 py-3 cursor-pointer hover:border-indigo-500 transition-colors text-center",children:[_?(0,a.jsxs)("p",{className:"text-sm text-indigo-300",children:[_.name," (",(_.size/1024).toFixed(0)," KB)"]}):v.warranty_receipt_url?(0,a.jsx)("p",{className:"text-sm text-green-400",children:"Current receipt on file — click to replace"}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Click to upload warranty image"}),(0,a.jsx)("input",{ref:P,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t,r;return k(null!==(r=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==r?r:null)}})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:S,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:S?"Saving...":"Save Changes"})]})]})]})})}function N(e){return e?Math.ceil((new Date(e).getTime()-new Date().getTime())/864e5):null}function f(e){let{expires:t}=e,r=N(t);return null===r?(0,a.jsx)("span",{className:"text-gray-500",children:"—"}):r<0?(0,a.jsx)("span",{className:"text-red-400 text-xs font-medium",children:"Expired"}):r<=90?(0,a.jsxs)("span",{className:"text-yellow-400 text-xs font-medium",children:[r,"d left"]}):(0,a.jsx)("span",{className:"text-green-400 text-xs font-medium",children:new Date(t).toLocaleDateString()})}function w(e){let{purchases:t}=e,[r,l]=(0,s.useState)(!1),[n,c]=(0,s.useState)(null),[d,o]=(0,s.useState)(""),[x,u]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),[h,y]=(0,s.useState)(!1),v=[...new Set(t.map(e=>e.category).filter(Boolean))],j=t.filter(e=>!d||e.category===d),w=t.reduce((e,t)=>e+Number(t.amount),0),C=t.filter(e=>null!==N(e.warranty_expires)&&0>N(e.warranty_expires)).length,_=async e=>{y(!0),await i(e),g(null),y(!1)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Purchases"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[t.length," one-time purchases recorded"]})]}),(0,a.jsx)("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium rounded-lg transition-colors",children:"+ Add Purchase"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Total Spent"}),(0,a.jsxs)("p",{className:"mt-1.5 text-xl font-bold text-white",children:["USD ",w.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Expired Warranties"}),(0,a.jsx)("p",{className:"mt-1.5 text-xl font-bold ".concat(C>0?"text-red-400":"text-white"),children:C})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Items"}),(0,a.jsx)("p",{className:"mt-1.5 text-xl font-bold text-white",children:t.length})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("select",{value:d,onChange:e=>o(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[(0,a.jsx)("option",{value:"",children:"All Categories"}),v.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),d&&(0,a.jsx)("button",{onClick:()=>o(""),className:"text-sm text-gray-400 hover:text-white px-3 py-2 transition-colors",children:"Clear"})]}),(0,a.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{className:"border-b border-gray-800",children:["Item","Date","Amount","Vendor","Assigned To","Warranty ID","Warranty Exp.","Receipts",""].map((e,t)=>(0,a.jsx)("th",{className:"text-left px-4 py-3.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},t))})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-800",children:0===j.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:9,className:"px-4 py-10 text-center text-gray-500",children:"No purchases found"})}):j.map(e=>{var t,r,s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[(0,a.jsxs)("td",{className:"px-4 py-4",children:[(0,a.jsx)("p",{className:"font-medium text-white",children:e.name}),e.category&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.category}),e.description&&(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-0.5 max-w-xs truncate",children:e.description})]}),(0,a.jsx)("td",{className:"px-4 py-4 text-gray-300 whitespace-nowrap",children:new Date(e.purchase_date).toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-4 py-4 font-semibold text-white whitespace-nowrap",children:[e.currency," ",Number(e.amount).toFixed(2)]}),(0,a.jsx)("td",{className:"px-4 py-4 text-gray-400",children:null!==(t=e.vendor)&&void 0!==t?t:"—"}),(0,a.jsx)("td",{className:"px-4 py-4 text-gray-400",children:null!==(r=e.assigned_to)&&void 0!==r?r:"—"}),(0,a.jsx)("td",{className:"px-4 py-4 text-gray-400 font-mono text-xs",children:null!==(s=e.warranty_id)&&void 0!==s?s:"—"}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)(f,{expires:e.warranty_expires})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[e.receipt_url&&(0,a.jsx)("button",{onClick:()=>u(e.receipt_url),className:"text-xs text-indigo-400 hover:text-indigo-300 underline transition-colors",children:"Receipt"}),e.warranty_receipt_url&&(0,a.jsx)("button",{onClick:()=>u(e.warranty_receipt_url),className:"text-xs text-indigo-400 hover:text-indigo-300 underline transition-colors",children:"Warranty"}),!e.receipt_url&&!e.warranty_receipt_url&&(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"—"})]})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 whitespace-nowrap",children:[(0,a.jsx)("button",{onClick:()=>c(e),className:"text-xs text-gray-400 hover:text-white transition-colors",children:"Edit"}),p===e.id?(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("button",{onClick:()=>_(e.id),disabled:h,className:"text-xs text-red-400 hover:text-red-300 transition-colors disabled:opacity-50",children:h?"...":"Confirm"}),(0,a.jsx)("button",{onClick:()=>g(null),className:"text-xs text-gray-500 hover:text-white transition-colors",children:"Cancel"})]}):(0,a.jsx)("button",{onClick:()=>g(e.id),className:"text-xs text-gray-600 hover:text-red-400 transition-colors",children:"Delete"})]})})]},e.id)})})]})}),x&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>u(null),children:(0,a.jsxs)("div",{className:"relative max-w-3xl max-h-[90vh] mx-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{onClick:()=>u(null),className:"absolute -top-10 right-0 text-white text-2xl hover:text-gray-300",children:"\xd7"}),(0,a.jsx)("img",{src:x,alt:"Receipt",className:"rounded-lg max-h-[85vh] object-contain"})]})}),r&&(0,a.jsx)(m,{onClose:()=>l(!1)}),n&&(0,a.jsx)(b,{purchase:n,onClose:()=>c(null)})]})}},8933:function(e,t,r){"use strict";r.d(t,{e:function(){return s}});var a=r(4033);let s=()=>(0,a.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")}},function(e){e.O(0,[33,971,117,744],function(){return e(e.s=2207)}),_N_E=e.O()}]);