(()=>{var e={};e.id=21,e.ids=[21],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8027:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>g,originalPathname:()=>x,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(5021),s(8927),s(5866),s(2029);var r=s(3191),l=s(8716),a=s(7922),i=s.n(a),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["(app)",{children:["tools",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5021)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\tools\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\tools\\[id]\\page.tsx"],x="/(app)/tools/[id]/page",g={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(app)/tools/[id]/page",pathname:"/tools/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7881:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8140:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23))},4571:()=>{},3458:(e,t,s)=>{Promise.resolve().then(s.bind(s,7676))},7676:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(326),l=s(434),a=s(5047),i=s(9701);let n=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function o(){let e=(0,a.usePathname)(),t=(0,a.useRouter)(),s=(0,i.e)(),o=async()=>{await s.auth.signOut(),t.push("/login")};return(0,r.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,r.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),r.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:n.map(({href:t,label:s,icon:a})=>{let i=e===t||e.startsWith(`${t}/`);return(0,r.jsxs)(l.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${i?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[r.jsx("span",{className:"text-base leading-none",children:a}),s]},t)})}),r.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,r.jsxs)("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[r.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var r=s(861);let l=()=>(0,r.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},7371:(e,t,s)=>{"use strict";s.d(t,{default:()=>l.a});var r=s(1812),l=s.n(r)},1812:(e,t,s)=>{"use strict";let{createProxy:r}=s(8570);e.exports=r("C:\\Users\\Chris-Optinet\\internal-stack-registry\\node_modules\\next\\dist\\client\\link.js")},8927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(9510),l=s(8585),a=s(5655);let i=(0,s(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function n({children:e}){let t=await (0,a.e)(),{data:{user:s}}=await t.auth.getUser();return s||(0,l.redirect)("/login"),(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[r.jsx(i,{}),r.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},5021:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(9510),l=s(5655),a=s(8585),i=s(7371);let n={low:"bg-green-900 text-green-300",medium:"bg-yellow-900 text-yellow-300",high:"bg-orange-900 text-orange-300",critical:"bg-red-900 text-red-300"},o={active:"bg-green-900 text-green-300",inactive:"bg-gray-800 text-gray-400",deprecated:"bg-red-900 text-red-300"},c={subscription:"bg-blue-900 text-blue-300",wallet:"bg-purple-900 text-purple-300",usage:"bg-yellow-900 text-yellow-300",free:"bg-gray-800 text-gray-400"},d={low:"bg-green-900 text-green-300",medium:"bg-yellow-900 text-yellow-300",high:"bg-orange-900 text-orange-300",critical:"bg-red-900 text-red-300"},x={open:"bg-red-900 text-red-300",investigating:"bg-yellow-900 text-yellow-300",resolved:"bg-green-900 text-green-300"};function g({label:e,cls:t}){return r.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs font-medium capitalize ${t}`,children:e})}function h({title:e,children:t}){return(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 space-y-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:e}),t]})}function p({label:e,children:t}){return(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4 py-2 border-b border-gray-800 last:border-0",children:[r.jsx("span",{className:"text-sm text-gray-500 shrink-0 w-36",children:e}),r.jsx("span",{className:"text-sm text-gray-200 text-right",children:t})]})}async function m({params:e}){let t=await (0,l.e)(),[{data:s},{data:m},{data:u},{data:b},{data:y},{data:j},{data:f}]=await Promise.all([t.from("tools").select("*").eq("id",e.id).single(),t.from("billing_subscriptions").select("*").eq("tool_id",e.id).maybeSingle(),t.from("wallets").select("*, topup_transactions(amount, currency, topped_up_by, created_at)").eq("tool_id",e.id).maybeSingle(),t.from("usage_logs").select("*").eq("tool_id",e.id).order("month",{ascending:!1}).limit(6),t.from("tool_project_mapping").select("*, projects(id, name, stage, owner)").eq("tool_id",e.id),t.from("credential_reference").select("*").eq("tool_id",e.id).maybeSingle(),t.from("incident_logs").select("*").eq("tool_id",e.id).order("occurred_at",{ascending:!1}).limit(10)]);s||(0,a.notFound)();let w=b?.[0],v=b?.[1],N=v&&w?(w.usage_amount+v.usage_amount)/2:w?.usage_amount??null,_=u&&N&&N>0?(u.current_balance/N).toFixed(1):null;return(0,r.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,r.jsxs)("div",{children:[r.jsx(i.default,{href:"/tools",className:"text-sm text-gray-500 hover:text-gray-300 transition-colors",children:"← Back to Tools"}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-3 flex-wrap",children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:s.name}),s.critical&&r.jsx("span",{className:"bg-red-900 text-red-300 text-xs font-semibold px-2.5 py-1 rounded-full",children:"Critical"}),r.jsx(g,{label:s.status,cls:o[s.status]}),r.jsx(g,{label:s.billing_type,cls:c[s.billing_type]})]}),s.description&&r.jsx("p",{className:"mt-2 text-sm text-gray-400",children:s.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(h,{title:"Overview",children:[r.jsx(p,{label:"Vendor",children:s.vendor??"—"}),r.jsx(p,{label:"Owner",children:s.owner??"—"}),r.jsx(p,{label:"Environment",children:s.environment??"—"}),r.jsx(p,{label:"Risk Level",children:r.jsx(g,{label:s.risk_level,cls:n[s.risk_level]})}),r.jsx(p,{label:"Critical",children:s.critical?"Yes":"No"}),r.jsx(p,{label:"Category",children:s.category??"—"}),r.jsx(p,{label:"Added",children:new Date(s.created_at).toLocaleDateString()})]}),r.jsx(h,{title:"Billing",children:"subscription"===s.billing_type&&m?(0,r.jsxs)(r.Fragment,{children:[r.jsx(p,{label:"Plan",children:m.plan_name??"—"}),(0,r.jsxs)(p,{label:"Monthly Cost",children:[m.currency," ",Number(m.monthly_cost).toFixed(2)]}),r.jsx(p,{label:"Frequency",children:m.payment_frequency}),r.jsx(p,{label:"Renewal",children:m.renewal_date?new Date(m.renewal_date).toLocaleDateString():"—"}),r.jsx(p,{label:"Billing Owner",children:m.billing_owner??"—"})]}):"wallet"===s.billing_type&&u?(0,r.jsxs)(r.Fragment,{children:[r.jsx(p,{label:"Current Balance",children:(0,r.jsxs)("span",{className:u.current_balance<=u.low_threshold?"text-red-400 font-semibold":"",children:[u.currency," ",Number(u.current_balance).toFixed(2)]})}),(0,r.jsxs)(p,{label:"Low Threshold",children:[u.currency," ",Number(u.low_threshold).toFixed(2)]}),null!==N&&(0,r.jsxs)(p,{label:"Avg Burn Rate",children:[u.currency," ",Number(N).toFixed(2)," / mo"]}),_&&(0,r.jsxs)(p,{label:"Est. Runway",children:[_," months"]})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"No billing data linked."})}),("usage"===s.billing_type||"wallet"===s.billing_type)&&r.jsx(h,{title:"Usage (Last 6 Months)",children:b&&b.length>0?r.jsx("div",{className:"space-y-2",children:b.map(e=>{let t=e.budget_limit?Math.min(e.usage_amount/e.budget_limit*100,100):null;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[r.jsx("span",{children:new Date(e.month).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),(0,r.jsxs)("span",{children:[e.currency," ",Number(e.usage_amount).toFixed(2),e.budget_limit?` / ${Number(e.budget_limit).toFixed(2)}`:""]})]}),null!==t&&r.jsx("div",{className:"h-1.5 bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full transition-all ${t>=90?"bg-red-500":t>=70?"bg-yellow-500":"bg-indigo-500"}`,style:{width:`${t}%`}})})]},e.id)})}):r.jsx("p",{className:"text-sm text-gray-500",children:"No usage data logged."})}),r.jsx(h,{title:"Linked Projects",children:y&&y.length>0?r.jsx("div",{className:"space-y-3",children:y.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx(i.default,{href:`/projects/${e.projects.id}`,className:"text-sm text-indigo-400 hover:text-indigo-300 font-medium",children:e.projects.name}),e.role&&r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e.role})]}),r.jsx(g,{label:e.projects.stage,cls:"bg-gray-800 text-gray-400"})]},e.id))}):r.jsx("p",{className:"text-sm text-gray-500",children:"Not linked to any projects."})}),r.jsx(h,{title:"Credential Reference",children:j?(0,r.jsxs)(r.Fragment,{children:[r.jsx(p,{label:"Login Type",children:j.login_type??"—"}),r.jsx(p,{label:"Location",children:j.credential_location??"—"}),r.jsx(p,{label:"Owner",children:j.owner??"—"}),r.jsx(p,{label:"Rotation Policy",children:j.rotation_policy??"—"}),r.jsx(p,{label:"Last Rotated",children:j.last_rotated?new Date(j.last_rotated).toLocaleDateString():"—"}),j.compliance_notes&&r.jsx(p,{label:"Notes",children:j.compliance_notes})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"No credential reference added."})})]}),r.jsx(h,{title:"Incident History",children:f&&f.length>0?(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-800",children:[r.jsx("th",{className:"text-left pb-3 text-xs text-gray-500 font-semibold uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"text-left pb-3 text-xs text-gray-500 font-semibold uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"text-left pb-3 text-xs text-gray-500 font-semibold uppercase tracking-wider",children:"Severity"}),r.jsx("th",{className:"text-left pb-3 text-xs text-gray-500 font-semibold uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"text-left pb-3 text-xs text-gray-500 font-semibold uppercase tracking-wider",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:f.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"py-3 pr-4 capitalize text-gray-300",children:e.type.replace("_"," ")}),r.jsx("td",{className:"py-3 pr-4 text-gray-400",children:e.description??"—"}),r.jsx("td",{className:"py-3 pr-4",children:r.jsx(g,{label:e.severity,cls:d[e.severity]})}),r.jsx("td",{className:"py-3 pr-4",children:r.jsx(g,{label:e.status,cls:x[e.status]})}),r.jsx("td",{className:"py-3 text-gray-500 text-xs",children:new Date(e.occurred_at).toLocaleDateString()})]},e.id))})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"No incidents recorded."})})]})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,metadata:()=>l});var r=s(9510);s(5023);let l={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function a({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},5655:(e,t,s)=>{"use strict";s.d(t,{e:()=>a});var r=s(2728),l=s(1615);let a=async()=>{let e=await (0,l.cookies)();return(0,r.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,471,637,861,512],()=>s(8027));module.exports=r})();