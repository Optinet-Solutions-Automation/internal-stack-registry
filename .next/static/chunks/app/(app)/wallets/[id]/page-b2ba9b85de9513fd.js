(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{146:function(e,t,a){Promise.resolve().then(a.bind(a,6257))},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(2972),r=a.n(s)},2119:function(e,t,a){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return r}});let s=a(3079);function r(e){let{createServerReference:t}=a(6671);return t(e,s.callServer)}},6257:function(e,t,a){"use strict";a.d(t,{default:function(){return d}});var s=a(7437),r=a(2265),l=a(7648),n=a(3820);let c="w-full bg-gray-800 border border-gray-700 text-gray-200 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500 placeholder-gray-600";function i(e){let{title:t,children:a}=e;return(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6 space-y-4",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:t}),a]})}function d(e){var t,a,d;let{wallet:o,topups:u,burnRate:x,runway:h}=e,[g,p]=(0,r.useState)(!1),[m,b]=(0,r.useState)(""),[y,v]=(0,r.useState)(o.currency),[f,N]=(0,r.useState)(""),[j,w]=(0,r.useState)(""),[S,_]=(0,r.useState)(!1),[C,k]=(0,r.useState)(null),[T,U]=(0,r.useState)(String(o.low_threshold)),[F,B]=(0,r.useState)(!1),[D,A]=(0,r.useState)(!1),E=Number(o.current_balance)<=Number(o.low_threshold),P=async e=>{e.preventDefault();let t=parseFloat(m);if(!t||t<=0)return;_(!0),k(null);let a=await (0,n.ov)(o.id,{amount:t,currency:y,topped_up_by:f,notes:j});_(!1),a.error?k(a.error):(p(!1),b(""),N(""),w(""))},L=async e=>{e.preventDefault(),B(!0),await (0,n.g8)(o.id,parseFloat(T)||0),B(!1),A(!0),setTimeout(()=>A(!1),2e3)};return(0,s.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.default,{href:"/wallets",className:"text-sm text-gray-500 hover:text-gray-300 transition-colors",children:"← Back to Wallets"}),(0,s.jsxs)("div",{className:"mt-3 flex items-center gap-3",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-white",children:[null!==(d=null===(t=o.tools)||void 0===t?void 0:t.name)&&void 0!==d?d:"Wallet"," — Wallet"]}),E&&(0,s.jsx)("span",{className:"bg-red-900 text-red-300 text-xs font-semibold px-2.5 py-1 rounded-full",children:"Low Balance"})]}),(null===(a=o.tools)||void 0===a?void 0:a.category)&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:o.tools.category})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Current Balance",value:"".concat(o.currency," ").concat(Number(o.current_balance).toFixed(2)),highlight:E?"text-red-400":"text-white"},{label:"Low Threshold",value:"".concat(o.currency," ").concat(Number(o.low_threshold).toFixed(2)),highlight:"text-white"},{label:"Avg Burn Rate",value:null!==x?"".concat(o.currency," ").concat(x.toFixed(2),"/mo"):"—",highlight:"text-white"},{label:"Est. Runway",value:null!==h?"".concat(h.toFixed(1)," months"):"—",highlight:null!==h&&h<2?"text-red-400":"text-white"}].map(e=>(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e.label}),(0,s.jsx)("p",{className:"mt-1.5 text-lg font-bold ".concat(e.highlight),children:e.value})]},e.label))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(i,{title:"Add Top-Up",children:g?(0,s.jsxs)("form",{onSubmit:P,className:"space-y-3",children:[C&&(0,s.jsx)("div",{className:"bg-red-900/40 border border-red-800 text-red-300 text-xs rounded-lg px-3 py-2",children:C}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs text-gray-400",children:"Amount *"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0.01",required:!0,value:m,onChange:e=>b(e.target.value),placeholder:"0.00",className:c})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs text-gray-400",children:"Currency"}),(0,s.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:c,children:[(0,s.jsx)("option",{value:"USD",children:"USD"}),(0,s.jsx)("option",{value:"PHP",children:"PHP"}),(0,s.jsx)("option",{value:"EUR",children:"EUR"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs text-gray-400",children:"Topped Up By"}),(0,s.jsx)("input",{type:"text",value:f,onChange:e=>N(e.target.value),placeholder:"e.g. Finance",className:c})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs text-gray-400",children:"Notes"}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>w(e.target.value),placeholder:"Optional note",className:c})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>p(!1),className:"flex-1 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:S,className:"flex-1 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:S?"Saving...":"Confirm Top-Up"})]})]}):(0,s.jsx)("button",{onClick:()=>p(!0),className:"w-full py-2.5 border border-dashed border-gray-700 rounded-lg text-sm text-gray-400 hover:text-white hover:border-indigo-500 transition-colors",children:"+ Add Top-Up"})}),(0,s.jsx)(i,{title:"Threshold Settings",children:(0,s.jsxs)("form",{onSubmit:L,className:"space-y-3",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("label",{className:"text-xs text-gray-400",children:["Low Balance Threshold (",o.currency,")"]}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0",value:T,onChange:e=>U(e.target.value),className:c})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"An alert will trigger when the balance drops below this amount."}),(0,s.jsx)("button",{type:"submit",disabled:F,className:"w-full py-2 bg-gray-800 hover:bg-gray-700 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors",children:D?"✓ Saved":F?"Saving...":"Update Threshold"})]})})]}),(0,s.jsx)(i,{title:"Top-Up History",children:0===u.length?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No top-ups recorded."}):(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"border-b border-gray-800",children:["Amount","By","Notes","Date"].map(e=>(0,s.jsx)("th",{className:"text-left pb-3 text-xs text-gray-500 font-semibold uppercase tracking-wider pr-4",children:e},e))})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-800",children:u.map(e=>{var t,a;return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"py-3 pr-4 font-semibold text-green-400",children:["+ ",e.currency," ",Number(e.amount).toFixed(2)]}),(0,s.jsx)("td",{className:"py-3 pr-4 text-gray-400",children:null!==(t=e.topped_up_by)&&void 0!==t?t:"—"}),(0,s.jsx)("td",{className:"py-3 pr-4 text-gray-400",children:null!==(a=e.notes)&&void 0!==a?a:"—"}),(0,s.jsx)("td",{className:"py-3 text-gray-500 text-xs",children:new Date(e.created_at).toLocaleDateString()})]},e.id)})})]})})]})}},3820:function(e,t,a){"use strict";a.d(t,{Lu:function(){return r},g8:function(){return n},ov:function(){return l}}),a(3079);var s=a(2119),r=(0,s.$)("bf101c4a2d0151cc365c52516efaa39600cd3f89"),l=(0,s.$)("3145bcfb98454fff9691cab0516a7d656ed286f5"),n=(0,s.$)("d9f093e597055cc2606b0c0469b5f518fcf0b9a0")}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=146)}),_N_E=e.O()}]);