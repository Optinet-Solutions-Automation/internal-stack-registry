(()=>{var e={};e.id=782,e.ids=[782],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7151:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(9569),r(8927),r(5866),r(2029);var s=r(3191),i=r(8716),a=r(7922),l=r.n(a),n=r(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d=["",{children:["(app)",{children:["alerts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9569)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\alerts\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8927)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Chris-Optinet\\internal-stack-registry\\src\\app\\(app)\\alerts\\page.tsx"],u="/(app)/alerts/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(app)/alerts/page",pathname:"/alerts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7881:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},6552:(e,t,r)=>{Promise.resolve().then(r.bind(r,1982))},4571:()=>{},3458:(e,t,r)=>{Promise.resolve().then(r.bind(r,7676))},1982:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var s=r(326),i=r(7577),a=r(434);let l={critical:"bg-red-900 text-red-300 border-red-800",high:"bg-orange-900 text-orange-300 border-orange-800",medium:"bg-yellow-900 text-yellow-300 border-yellow-800",low:"bg-gray-800 text-gray-400 border-gray-700"},n={critical:"bg-red-500",high:"bg-orange-500",medium:"bg-yellow-500",low:"bg-gray-500"},o={low_balance:"Low Balance",budget_exceeded:"Budget Exceeded",upcoming_renewal:"Upcoming Renewal",overdue_renewal:"Overdue Renewal",rotation_due:"Rotation Due",low_runway:"Low Runway",open_incident:"Open Incident"},d={low_balance:"◉",budget_exceeded:"◈",upcoming_renewal:"◎",overdue_renewal:"◎",rotation_due:"◬",low_runway:"◉",open_incident:"◭"};function c({alerts:e}){let[t,r]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),m=e.filter(e=>(!t||e.type===t)&&(!c||e.severity===c)),p=e.filter(e=>"critical"===e.severity).length,h=e.filter(e=>"high"===e.severity).length;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Alerts"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[e.length," active alerts — computed from live data"]})]}),p>0&&(0,s.jsxs)("div",{className:"bg-red-900/30 border border-red-800 rounded-xl px-5 py-4 flex items-center gap-3",children:[s.jsx("span",{className:"text-red-400 text-lg",children:"⚠"}),(0,s.jsxs)("p",{className:"text-sm font-semibold text-red-300",children:[p," critical alert",p>1?"s":""," require immediate attention"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Critical",value:p,cls:p>0?"text-red-400":"text-white"},{label:"High",value:h,cls:h>0?"text-orange-400":"text-white"},{label:"Medium",value:e.filter(e=>"medium"===e.severity).length,cls:"text-white"},{label:"Total",value:e.length,cls:"text-white"}].map(e=>(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e.label}),s.jsx("p",{className:`mt-1.5 text-xl font-bold ${e.cls}`,children:e.value})]},e.label))}),(0,s.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,s.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"",children:"All Types"}),Object.entries(o).map(([e,t])=>s.jsx("option",{value:e,children:t},e))]}),(0,s.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"bg-gray-900 border border-gray-700 text-gray-300 text-sm rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"",children:"All Severities"}),s.jsx("option",{value:"critical",children:"Critical"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]}),(t||c)&&s.jsx("button",{onClick:()=>{r(""),u("")},className:"text-sm text-gray-400 hover:text-white px-3 py-2 transition-colors",children:"Clear"})]}),0===m.length?(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl px-6 py-12 text-center",children:[s.jsx("p",{className:"text-2xl mb-2",children:"✓"}),s.jsx("p",{className:"text-white font-semibold",children:"All clear"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No alerts match the current filters."})]}):s.jsx("div",{className:"space-y-3",children:m.map(e=>(0,s.jsxs)("div",{className:`bg-gray-900 border rounded-xl px-5 py-4 flex items-start gap-4 ${l[e.severity].split(" ").filter(e=>e.startsWith("border")).join(" ")}`,children:[s.jsx("div",{className:"mt-1 shrink-0",children:s.jsx("span",{className:`block w-2 h-2 rounded-full ${n[e.severity]}`})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-base",children:d[e.type]}),s.jsx("span",{className:"text-sm font-semibold text-white",children:e.title}),s.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs font-medium capitalize ${l[e.severity]}`,children:e.severity}),s.jsx("span",{className:"text-xs text-gray-500 bg-gray-800 px-2 py-0.5 rounded-full",children:o[e.type]})]}),s.jsx("p",{className:"mt-1 text-sm text-gray-400",children:e.message})]}),s.jsx(a.default,{href:e.link,className:"shrink-0 text-indigo-400 hover:text-indigo-300 text-xs font-medium transition-colors whitespace-nowrap",children:"View →"})]},e.id))})]})}},7676:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(326),i=r(434),a=r(5047),l=r(9701);let n=[{href:"/dashboard",label:"Dashboard",icon:"▦"},{href:"/tools",label:"Tools",icon:"⚙"},{href:"/projects",label:"Projects",icon:"◫"},{href:"/billing",label:"Billing",icon:"◈"},{href:"/wallets",label:"Wallets",icon:"◉"},{href:"/usage",label:"Usage",icon:"◎"},{href:"/credentials",label:"Credentials",icon:"◬"},{href:"/incidents",label:"Incidents",icon:"◭"},{href:"/alerts",label:"Alerts",icon:"◆"},{href:"/purchases",label:"Purchases",icon:"◻"},{href:"/settings",label:"Settings",icon:"◌"}];function o(){let e=(0,a.usePathname)(),t=(0,a.useRouter)(),r=(0,l.e)(),o=async()=>{await r.auth.signOut(),t.push("/login")};return(0,s.jsxs)("aside",{className:"w-56 shrink-0 flex flex-col h-screen bg-gray-900 border-r border-gray-800",children:[(0,s.jsxs)("div",{className:"px-5 py-5 border-b border-gray-800",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest",children:"Optinet"}),s.jsx("p",{className:"text-sm font-bold text-white mt-0.5",children:"Stack Registry"})]}),s.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:n.map(({href:t,label:r,icon:a})=>{let l=e===t||e.startsWith(`${t}/`);return(0,s.jsxs)(i.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${l?"bg-indigo-600 text-white font-medium":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[s.jsx("span",{className:"text-base leading-none",children:a}),r]},t)})}),s.jsx("div",{className:"px-3 py-4 border-t border-gray-800",children:(0,s.jsxs)("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:[s.jsx("span",{children:"→"})," Sign out"]})})]})}},9701:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});var s=r(861);let i=()=>(0,s.createBrowserClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk")},9569:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(9510),i=r(5655);let a=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\app\(app)\alerts\AlertsClient.tsx#default`);async function l(){let e=await (0,i.e)(),[{data:t},{data:r},{data:l},{data:n},{data:o}]=await Promise.all([e.from("wallets").select("*, tools(id, name)"),e.from("usage_logs").select("*, tools(id, name)").order("month",{ascending:!1}),e.from("billing_subscriptions").select("*, tools(id, name)"),e.from("credential_reference").select("*, tools(id, name)"),e.from("incident_logs").select("*, tools(id, name)").neq("status","resolved")]),d=new Date,c=d.toISOString().slice(0,7),u=[];for(let e of t??[]){let t=Number(e.current_balance),r=Number(e.low_threshold);if(t<=r){let s=t<=0;u.push({id:`low_balance_${e.id}`,type:"low_balance",severity:s?"critical":t<=.5*r?"high":"medium",title:"Low Wallet Balance",message:`${e.tools?.name} — balance ${e.currency} ${t.toFixed(2)} is at or below threshold of ${e.currency} ${r.toFixed(2)}`,link:`/wallets/${e.id}`})}}for(let e of(r??[]).filter(e=>e.month.startsWith(c)))if(e.budget_limit&&Number(e.usage_amount)>Number(e.budget_limit)){let t=(Number(e.usage_amount)/Number(e.budget_limit)*100).toFixed(0);u.push({id:`budget_${e.id}`,type:"budget_exceeded",severity:Number(t)>=150?"critical":Number(t)>=120?"high":"medium",title:"Budget Exceeded",message:`${e.tools?.name} — ${e.currency} ${Number(e.usage_amount).toFixed(2)} spent vs budget of ${Number(e.budget_limit).toFixed(2)} (${t}%)`,link:"/usage"})}for(let e of l??[]){if(!e.renewal_date)continue;let t=Math.ceil((new Date(e.renewal_date).getTime()-d.getTime())/864e5);t<0?u.push({id:`overdue_renewal_${e.id}`,type:"overdue_renewal",severity:"high",title:"Renewal Overdue",message:`${e.tools?.name} — ${e.plan_name??"subscription"} renewal was due ${Math.abs(t)} days ago`,link:"/billing"}):t<=30&&u.push({id:`renewal_${e.id}`,type:"upcoming_renewal",severity:t<=7?"high":"low",title:"Upcoming Renewal",message:`${e.tools?.name} — ${e.plan_name??"subscription"} renews in ${t} day${1!==t?"s":""} on ${new Date(e.renewal_date).toLocaleDateString()}`,link:"/billing"})}for(let e of n??[]){if(!e.last_rotated||!e.rotation_policy)continue;let t=e.rotation_policy.match(/(\d+)/);if(!t)continue;let r=parseInt(t[1]),s=Math.floor((d.getTime()-new Date(e.last_rotated).getTime())/864e5);s>r&&u.push({id:`rotation_${e.id}`,type:"rotation_due",severity:s>1.5*r?"high":"medium",title:"Credential Rotation Due",message:`${e.tools?.name} — last rotated ${s} days ago, policy is every ${r} days`,link:"/credentials"})}for(let e of o??[])("critical"===e.severity||"high"===e.severity)&&u.push({id:`incident_${e.id}`,type:"open_incident",severity:e.severity,title:`${"critical"===e.severity?"Critical":"High"} Incident Open`,message:`${e.tools?.name} — ${e.type.replace("_"," ")} is ${e.status}: ${e.description??"no description"}`,link:`/incidents/${e.id}`});let m={critical:0,high:1,medium:2,low:3};return u.sort((e,t)=>m[e.severity]-m[t.severity]),s.jsx(a,{alerts:u})}},8927:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9510),i=r(8585),a=r(5655);let l=(0,r(8570).createProxy)(String.raw`C:\Users\Chris-Optinet\internal-stack-registry\src\components\layout\Sidebar.tsx#default`);async function n({children:e}){let t=await (0,a.e)(),{data:{user:r}}=await t.auth.getUser();return r||(0,i.redirect)("/login"),(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-950",children:[s.jsx(l,{}),s.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>i});var s=r(9510);r(5023);let i={title:"Internal Stack Registry | Optinet Solutions",description:"Manage your internal tools, billing, and infrastructure"};function a({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:"bg-gray-950 text-gray-100 antialiased",children:e})})}},5655:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var s=r(2728),i=r(1615);let a=async()=>{let e=await (0,i.cookies)();return(0,s.createServerClient)("https://vmaqujtqghmsyyixklmw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtYXF1anRxZ2htc3l5aXhrbG13Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5OTU2MzcsImV4cCI6MjA4NzU3MTYzN30.ZswkblLsDdc4Rj9jqJt5KVektufrC9MM6_tARpMo6Uk",{cookies:{getAll:()=>e.getAll(),setAll:t=>{try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,471,637,861,512],()=>r(7151));module.exports=s})();